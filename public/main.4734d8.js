require=function t(e,n,o){function r(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({CsMVuE:[function(t,e){e.exports={id:"project_id",background:"the-milky-way-fpo.jpg",producer:"The name of your group",title:"Project title",summary:"A catchy phrase summing up the project",description:"This is a brief but slightly more detailed project description.",pages:[{About:"<h1>All about the project</h1>\n<p>This is where we'll go into detail.</p>\n<hr />\n<h2>Lorem ipsum dolor sir amet.</h2>\n<p>Break it into sections, add pictures, whatever.</p>"},{"Another page":"<p>Any additional pages you'd like can be added here.</p>"}],organizations:[{image:"//placehold.it/100.png?text=Example",name:"Example Organization",description:"This is an example organization.",url:["https://www.zooniverse.org/","https://twitter.com/the_zooniverse","https://github.com/zooniverse"]}],scientists:[{image:"//placehold.it/100.png?text=Example",name:"Example Scietist",location:"Oxford, U.K.",description:"This is an example scientist.",url:"https://twitter.com/orbitingfrog"}],developers:[{image:"//placehold.it/100.png?text=Example",name:"Example Developer",location:"Chicago, IL",description:"This is an example developer.",url:["http://viewinglens.com/","https://github.com/brian-c","https://twitter.com/__brian_c__"]}],tasks:{pickOne:{type:"button",question:"Pick one",choices:[{value:"default",image:"//placehold.it/100.png",label:"Default"},{value:"specific",image:"//placehold.it/100.png",label:"Specific"}]}},firstTask:"pickOne"}},{}],"zooniverse-readymade/current-configuration":[function(t,e){e.exports=t("CsMVuE")},{}],3:[function(t,e){e.exports=t("zooniverse-readymade/current-project")},{"zooniverse-readymade/current-project":"FmVlZl"}],FmVlZl:[function(t,e){var n;n=t("../../../src/project"),$.getJSON("/project",function(){return function(t){var e;return null!=t.title?(e=document.createElement("div"),e.innerHTML=t.title,document.title=e.textContent,new n(t)):void 0}}(this)),e.exports=[]},{"../../../src/project":65}],"zooniverse-readymade/current-project":[function(t,e){e.exports=t("FmVlZl")},{}],6:[function(t,e){(function(){var t,n,o,r,i,s,a,l,u,p,c,h,d,f,g,v,m,y,w,_,k,b,z={}.hasOwnProperty,S=function(t,e){function n(){this.constructor=t}for(var o in e)z.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},C=[].slice,x=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};w=function(){var t,e,n,o,r;for(e=["mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","matchesSelector","matches"],o=0,r=e.length;r>o;o++)n=e[o],n in Element.prototype&&(t=n);return function(e,n){return"function"==typeof e[t]?e[t](n):void 0}}(),v=function(){var t;return t="marking-surface-element-that-only-exists-to-please-ie",function(e,n){var o;return document.querySelector('style, link[rel="stylesheet"]').insertAdjacentHTML("beforeBegin",'<span id="'+t+'"></span>\n<style id="'+e+'">'+n+"</style>"),o=document.getElementById(t),o.parentNode.removeChild(o),document.getElementById(e)}}(),t=function(){function t(t){var e,n;null==t&&(t={}),this._events={};for(e in t)n=t[e],this[e]=n}return t.prototype.on=function(t,e){var n;return null==(n=this._events)[t]&&(n[t]=[]),this._events[t].push(e)},t.prototype.trigger=function(t,e){var n,o,r,i,s;if(null==e&&(e=[]),t in this._events){for(i=this._events[t],s=[],o=0,r=i.length;r>o;o++)n=i[o],s.push(this.applyHandler(n,e));return s}},t.prototype.applyHandler=function(t,e){var n,o;return null==e&&(e=[]),n=this,t instanceof Array&&(o=t,n=o[0],t=o[1]),"string"==typeof t&&(t=n[t]),t.apply(n,e)},t.prototype.off=function(t,e){var n,o,r,i;if(null==t){i=[];for(r in this._events)i.push(delete this._events[r]);return i}return t in this._events?(o=this._events[t],null!=e?(n=o.indexOf(e),o.splice(n,1)):o.splice(0)):void 0},t.prototype.destroy=function(){return this.trigger("destroy"),this.off()},t}(),o=function(t){function e(){this._eventListeners={},this._delegatedListeners={},e.__super__.constructor.apply(this,arguments),null==this.el&&this._createEl(),this.addEvent("mousedown",this._onStart),this.addEvent("touchstart",this._onStart),this.disabled&&this.disable()}return S(e,t),e.prototype.tag="div",e.prototype.disabled=!1,e.prototype._startEvent=null,e.prototype._createEl=function(){var t,e,n;return n=this.tag.split("."),e=n[0],t=2<=n.length?C.call(n,1):[],this.el=document.createElement(e),this.el.className=t.join(" ")},e.prototype.attr=function(t,e){return 1===arguments.length?this.el.getAttribute(t):null!=e?this.el.setAttribute(t,e):this.el.removeAttribute(t),"msMatchesSelector"in document.body?(this.el.style.display="none",this.el.style.display=""):void 0},e.prototype.enable=function(){return this.disabled=!1,this.attr("disabled",null),this.trigger("enable")},e.prototype.disable=function(){return this.disabled=!0,this.attr("disabled",!0),this.trigger("disable")},e.prototype.addEvent=function(){var t,e,n,o,r,i,s,a;return e=arguments[0],o=3<=arguments.length?C.call(arguments,1,a=arguments.length-1):(a=1,[]),n=arguments[a++],t=o[0],e in this._eventListeners||e in this._delegatedListeners||this.el.addEventListener(e,this,!1),null!=t?(null==(r=this._delegatedListeners)[e]&&(r[e]={}),null==(i=this._delegatedListeners[e])[t]&&(i[t]=[]),this._delegatedListeners[e][t].push(n)):(null==(s=this._eventListeners)[e]&&(s[e]=[]),this._eventListeners[e].push(n))},e.prototype._onStart=function(t){return this._startEvent=t,addEventListener("mousemove",this,!1),addEventListener("mouseup",this,!1),addEventListener("touchmove",this,!1),addEventListener("touchend",this,!1),addEventListener("touchcancel",this,!1),this.dispatchEvent("start",{originalEvent:t})},e.prototype._onMove=function(t){return this.dispatchEvent("move",{originalEvent:t})},e.prototype._onRelease=function(t){return removeEventListener("mousemove",this,!1),removeEventListener("mouseup",this,!1),removeEventListener("touchmove",this,!1),removeEventListener("touchend",this,!1),removeEventListener("touchcancel",this,!1),this._startEvent=null,this.dispatchEvent("release",{originalEvent:t})},e.prototype.handleEvent=function(t){var e,n,o,r,i,s,a,l,u,p,c,h,d,f,g,v,m;if(!this.disabled)if(t.currentTarget===window)switch(t.type){case"mousemove":case"touchmove":return this._onMove(t);case"mouseup":case"touchend":case"touchcancel":return this._onRelease(t)}else{if(a=t.type,(null!=(p=t.detail)?p.originalEvent:void 0)&&(t=t.detail.originalEvent,r=null!=(c=null!=(h=this._startEvent)?h.target:void 0)?c:null!=(d=this._startEvent)?d.srcElement:void 0),a in this._eventListeners)for(f=this._eventListeners[a],l=0,u=f.length;u>l;l++)e=f[l],this.applyHandler(e,[t]);if(a in this._delegatedListeners){g=this._delegatedListeners[a],m=[];for(i in g){for(n=g[i],o=null,s=null!=(v=null!=r?r:t.target)?v:t.srcElement;null!=s&&null==o;)w(s,i)&&(o=s),s=s.parentNode;m.push(null!=o?function(){var o,r,i;for(i=[],o=0,r=n.length;r>o;o++)e=n[o],i.push(this.applyHandler(e,[t]));return i}.call(this):void 0)}return m}}},e.prototype.removeEvent=function(){var t,e,n,o,r,i,s;return e=arguments[0],i=3<=arguments.length?C.call(arguments,1,s=arguments.length-1):(s=1,[]),n=arguments[s++],t=i[0],o=null!=t?e in this._delegatedListeners&&t in this._delegatedListeners[e]&&x.call(this._delegatedListeners[e],n)>=0?this._delegatedListeners[e]:void 0:e in this._eventListeners&&x.call(this._eventListeners[e],n)>=0?this._eventListeners[e]:void 0,null!=o?(r=o.indexOf(n),o.splice(r,1)):void 0},e.prototype.dispatchEvent=function(t,e){var n;return n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,e),this.el.dispatchEvent(n)},e.prototype.trigger=function(t,n){return null==n&&(n=[]),e.__super__.trigger.apply(this,arguments),this.dispatchEvent(t,[this].concat(C.call(n)))},e.prototype.pointerOffset=function(t){var e,n,o,r,i;return"touches"in t&&(t=t.touches[0]),i=this.el.getBoundingClientRect(),e=i.left,n=i.top,o=t.pageX-pageXOffset-e,r=t.pageY-pageYOffset-n,{x:o,y:r}},e.prototype.toFront=function(){var t;return null!=(t=this.el.parentNode)?t.appendChild(this.el):void 0},e.prototype.remove=function(){var t;return null!=(t=this.el.parentNode)?t.removeChild(this.el):void 0},e.prototype.destroy=function(){var t;e.__super__.destroy.apply(this,arguments),this.remove();for(t in this._eventListeners)this.el.removeEventListener(t,this,!1);for(t in this._delegatedListeners)t in this._eventListeners||this.el.removeEventListener(t,this,!1);return this._eventListeners={},this._delegatedListeners={}},e}(t),l={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},n=["viewBox","preserveAspectRatio","stdDeviation","tableValues"],u=["textContent"],r="marking-surface-filter-",p=function(t){function e(){e.__super__.constructor.apply(this,arguments),null!=this.defaultAttrs&&(this.attr(this.defaultAttrs),this.defaultAttrs=null)}return S(e,t),e.prototype.tag="svg",e.prototype.defaultAttrs=null,e.prototype._createEl=function(){var t,e,n,o,r,i;return r=this.tag.split("."),n=r[0],t=2<=r.length?C.call(r,1):[],n||(n="svg"),i=n.split(":"),e=2<=i.length?C.call(i,0,o=i.length-1):(o=0,[]),n=i[o++],e=e.join(":")||"svg",this.el=document.createElementNS(l[e]||null,n),this.attr("class",t.join(" "))},e.prototype.attr=function(t,e){var o,r,i,s,a,p;if("string"==typeof t)return x.call(n,t)>=0||x.call(u,t)>=0||(t=t.replace(/([A-Z])/g,"-$1").toLowerCase()),s=t.split(":"),r=2<=s.length?C.call(s,0,i=s.length-1):(i=0,[]),t=s[i++],r=null!=(a=l[r.join("")])?a:null,1===arguments.length?x.call(u,t)>=0?this.el[t]:this.el.getAttributeNS(r,t):null!=e?x.call(u,t)>=0?this.el[t]=e:this.el.setAttributeNS(r,t,e):this.el.removeAttributeNS(r,t);o=t,p=[];for(t in o)e=o[t],p.push(this.attr(t,e));return p},e.prototype.addShape=function(t,n){var o;return o=new e({tag:t,defaultAttrs:n}),this.el.appendChild(o.el),o},e.prototype.filter=function(t){return this.attr("filter",null!=t?"url(#"+r+t+")":"")},e}(o),p.filtersContainer=new p({defaultAttrs:{id:"marking-surface-filters-container",width:0,height:0,style:"bottom: 0; position: absolute; right: 0;"}}),p.filterDefs=p.filtersContainer.addShape("defs"),_=p.filterDefs.addShape("filter",{id:""+r+"shadow"}),_.addShape("feGaussianBlur",{stdDeviation:2,"in":"SourceAlpha"}),_.addShape("feOffset",{dx:.5,dy:1}),k=_.addShape("feMerge"),k.addShape("feMergeNode"),k.addShape("feMergeNode",{"in":"SourceGraphic"}),f=p.filterDefs.addShape("filter",{id:""+r+"focus"}),f.addShape("feGaussianBlur",{stdDeviation:3}),g=f.addShape("feMerge"),g.addShape("feMergeNode"),g.addShape("feMergeNode",{"in":"SourceGraphic"}),m=p.filterDefs.addShape("filter",{id:""+r+"invert",colorInterpolationFilters:"sRGB"}),y=m.addShape("feComponentTransfer"),y.addShape("feFuncR",{type:"table",tableValues:"1 0"}),y.addShape("feFuncG",{type:"table",tableValues:"1 0"}),y.addShape("feFuncB",{type:"table",tableValues:"1 0"}),document.body.appendChild(p.filtersContainer.el),s=function(t){function e(){return b=e.__super__.constructor.apply(this,arguments)}return S(e,t),e.prototype.precision=3,e.prototype.ignore=["disabled","ignore","precision"],e.prototype.set=function(t,e){var n,o;if("string"==typeof t)o=this["set "+t],null!=o&&(e=o.call(this,e)),this[t]=e,this.trigger("change",[t,e]);else{n=t;for(t in n)e=n[t],this.set(t,e)}},e.prototype.toJSON=function(){var t,e,n,o;n={};for(e in this)o=this[e],x.call(this.ignore,e)>=0||"_"!==e.charAt(0)&&("number"==typeof o&&(t=o.toString().split("."),null!=t[1]&&(t[1]=t[1].slice(0,this.precision),o=parseFloat(t.join(".")))),n[e]=o);return n},e}(t),i={esc:27,"delete":8},d=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.el.type="button",this.tool.on("focus",[this.el,"focus"]),this.tool.on("select",[this,"toFront"]),this.tool.on("destroy",[this,"destroy"]),this.addEvent("focus",[this.tool,"focus"]),this.addEvent("click",[this.tool,"select"]),this.addEvent("blur",[this.tool,"blur"]),this.addEvent("keydown",this.onKeydown)}return S(e,t),e.prototype.tag="button.marking-surface-tool-focus-target",e.prototype.onKeydown=function(t){var e,n,o,r,s;if(!(t.metaKey||t.ctrlKey||t.altKey)){switch(t.which){case i["delete"]:r=this.el.parentNode.children,e=Array.prototype.indexOf.call(r,this.el),this.tool.mark.destroy(),n=r[e%r.length],null!=n&&n.focus();break;case i.esc:null!=(s=this.tool.markingSurface.selection)&&s.deselect();break;default:o=!0}return o?void 0:t.preventDefault()}},e}(o),h=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.el.insertAdjacentHTML("beforeEnd",this.template),this.tool.on("select",[this,"onToolSelect"]),this.tool.mark.on("change",[this,"onMarkChange"]),this.tool.on("deselect",[this,"onToolDeselect"]),this.tool.on("destroy",[this,"onToolDestroy"])}return S(e,t),e.prototype.tag="div.marking-surface-tool-controls",e.prototype.template="",e.prototype.onToolSelect=function(){return this.toFront(),this.attr("data-selected",!0)},e.prototype.onToolDeselect=function(){return this.attr("data-selected",null)},e.prototype.onToolDestroy=function(){return this.destroy()},e.prototype.onMarkChange=function(){return"function"==typeof this.render?this.render.apply(this,arguments):void 0},e.prototype.moveTo=function(t){var e,n,o,r,i,s;return r=t.x,i=t.y,s=this.tool.markingSurface.toPixels({x:r,y:i}),r=s.x,i=s.y,o=this.tool.markingSurface.el.offsetWidth,e=this.tool.markingSurface.el.offsetHeight,n=0>r||r>o||0>i||i>e,this.attr("data-out-of-bounds",n||null),this.el.style.left=""+r+"px",this.el.style.top=""+i+"px",this.attr("data-horizontal-room",o/2>r?"right":"left"),this.attr("data-vertical-room",e/2>i?"down":"up")},e.prototype.render=function(){return this.attr("data-complete",this.tool.isComplete()||null)},e}(o),h.defaultStyle=v("marking-surface-tool-controls-default-style",".marking-surface-tool-controls {\n  position: absolute;\n}\n\n.marking-surface-tool-controls:not([data-selected]) {\n  display: none;\n}\n\n.marking-surface-tool-controls[data-out-of-bounds] {\n  display: none;\n}"),c=function(t){function e(){var t=this;e.__super__.constructor.apply(this,arguments),null==this.mark&&(this.mark=new this.constructor.Mark,this.trigger("create-mark",[this.mark])),this.mark.on("change",[this,"onMarkChange"]),this.mark.on("destroy",[this,"onMarkDestroy"]),null!=this.constructor.Controls&&(this.controls=new this.constructor.Controls({tool:this}),this.trigger("create-controls",[this.controls])),this.focusTarget=new d({tool:this}),this.focusRoot=p.prototype.addShape.call(this,"g.marking-surface-tool-focus-root"),this.selectedRoot=this.focusRoot.addShape("g.marking-surface-tool-selected-root"),this.root=this.selectedRoot.addShape("g.marking-surface-tool-root"),setTimeout(function(){return null!=t.markingSurface?t.rescale(t.markingSurface.getScale()):void 0})}return S(e,t),e.Mark=s,e.Controls=null,e.mobile=!!navigator.userAgent.match(/iP|droid/),e.prototype.tag="g.marking-surface-tool",e.prototype.markingSurface=null,e.prototype.movements=0,e.prototype.onMarkChange=function(t,e){var n,o,r,i;return"function"==typeof this.render&&this.render(t,e),null!=(o=this.render)&&null!=(r=o[t])&&"function"==typeof r.call&&r.call(this,e),"function"==typeof this[n=null!=(i=this.render)?i[t]:void 0]&&this[n](),this.trigger("change",[this.mark])},e.prototype.onMarkDestroy=function(){return this.destroy()},e.prototype.addShape=function(){var t;return(t=this.root).addShape.apply(t,arguments)},e.prototype.coords=function(t){return this.markingSurface.toScale(this.markingSurface.sizeRect.pointerOffset(t))},e.prototype._onStart=function(t){return t.preventDefault(),e.__super__._onStart.apply(this,arguments),this.select(),this.focus()},e.prototype.handleEvent=function(){return this.markingSurface.disabled?void 0:e.__super__.handleEvent.apply(this,arguments)},e.prototype.onInitialStart=function(t){return this.focus(),this.trigger("initial-click",[t])},e.prototype.onInitialMove=function(t){return this.trigger("initial-drag",[t])},e.prototype.onInitialRelease=function(t){return this.movements+=1,this.trigger("initial-release",[t])},e.prototype.render=function(){},e.prototype.rescale=function(){return this.render()},e.prototype.isComplete=function(){return 1===this.movements},e.prototype.focus=function(){return this.attr("data-focused",!0),this.trigger("focus")},e.prototype.blur=function(){return this.attr("data-focused",null),this.trigger("blur")},e.prototype.select=function(){return this.attr("data-selected",!0),this.toFront(),this.trigger("select")},e.prototype.deselect=function(){return this.attr("data-selected",null),this.trigger("deselect")},e.prototype.destroy=function(){return this.deselect(),e.__super__.destroy.apply(this,arguments)},e}(p),c.defaultStyle=v("marking-surface-tool-default-style",".marking-surface-tool[data-focused] .marking-surface-tool-focus-root {\n  filter: url(#"+r+"focus);\n}\n\n.marking-surface-tool[data-selected] .marking-surface-tool-selected-root {\n  filter: url(#"+r+"shadow);\n}"),a=function(t){function e(){this.tools=[],e.__super__.constructor.apply(this,arguments),this.svg=new p({tag:"svg.marking-surface-svg"}),this.sizeRect=this.svg.addShape("rect",{fill:"none",stroke:"transparent",strokeWidth:0,width:"100%",height:"100%"}),this.root=this.svg.addShape("g.marking-surface-svg-root"),this.el.appendChild(this.svg.el),this.on("destroy",[this.svg,"destroy"]),this.svg.addEvent("select",".marking-surface-tool",[this,"onSelectTool"]),this.svg.addEvent("change",".marking-surface-tool",[this,"onChangeMark"]),this.svg.addEvent("deselect",".marking-surface-tool",[this,"onDeselectTool"]),this.svg.addEvent("destroy",".marking-surface-tool",[this,"onDestroyTool"]),this.focusable&&(this.toolFocusTargetsContainer=new o({tag:"div.marking-surface-tool-focusables-container"}),this.el.appendChild(this.toolFocusTargetsContainer.el),this.on("destroy",[this.toolFocusTargetsContainer,"destroy"])),this.toolControlsContainer=new o({tag:"div.marking-surface-tool-controls-container"}),this.el.appendChild(this.toolControlsContainer.el),this.on("destroy",[this.toolControlsContainer,"destroy"]),this.inputName&&(this.input=new o({tag:"input.marking-surface-input"}),this.input.el.tabIndex=-1,this.input.el.name=this.inputName,this.on("change",this.onChange),this.on("destroy",[this.input,"destroy"]),this.el.appendChild(this.input.el)),this.trigger("change"),addEventListener("resize",this,!1)}return S(e,t),e.prototype.tag="div.marking-surface",e.prototype.focusable=!0,e.prototype.inputName="",e.prototype.tool=null,e.prototype.selection=null,e.prototype.handleEvent=function(t){return t.target===window&&"resize"===t.type?this.rescaleTools():e.__super__.handleEvent.apply(this,arguments)},e.prototype.addShape=function(){var t;return(t=this.root).addShape.apply(t,arguments)},e.prototype._onStart=function(t){var n,o;if(!t.defaultPrevented&&!w(t.target,".marking-surface-tool-controls-container *"))return t.preventDefault(),n=null==this.selection||(null!=(o=this.selection)?o.isComplete():void 0)?null!=this.tool?this.addTool():void 0:this.selection,null!=n?(n.select(),n.onInitialStart(t),e.__super__._onStart.apply(this,arguments)):void 0},e.prototype._onMove=function(t){var n;return e.__super__._onMove.apply(this,arguments),null!=(n=this.selection)?n.onInitialMove(t):void 0},e.prototype._onRelease=function(t){var n;return e.__super__._onRelease.apply(this,arguments),null!=(n=this.selection)?n.onInitialRelease(t):void 0},e.prototype.addTool=function(t){var e;return null==t&&(t=new this.tool({markingSurface:this})),t.markingSurface=this,this.tools.push(t),t.remove(),this.root.el.appendChild(t.el),"function"==typeof t.render&&t.render(),null!=t.controls&&this.toolControlsContainer.el.appendChild(t.controls.el),null!=t.focusTarget&&null!=(e=this.toolFocusTargetsContainer)&&e.el.appendChild(t.focusTarget.el),this.trigger("add-tool",[t]),this.trigger("change"),t},e.prototype.onSelectTool=function(t){var e,n;return e=t.detail[0],this.selection!==e?(null!=(n=this.selection)&&n.deselect(),this.selection=e,this.trigger("select-tool",[this.selection])):void 0},e.prototype.onChangeMark=function(t){var e;return e=t.detail[0],this.trigger("change",[e])},e.prototype.onChange=function(){var t;return null!=(t=this.input)?t.el.value=this.getValue():void 0},e.prototype.onDeselectTool=function(t){var e;return e=t.detail[0],this.selection===e?(this.selection=null,this.trigger("deselect-tool",[e])):void 0},e.prototype.onDestroyTool=function(t){var e,n;return n=t.detail[0],e=this.tools.indexOf(n),this.tools.splice(e,1),this.trigger("remove-tool",[n]),this.trigger("change")},e.prototype.toScale=function(t){var e,n,o,r;return o=t.x,r=t.y,this.svg.el.hasAttribute("viewBox")&&(n=this.svg.el.viewBox.animVal,e=this.sizeRect.el.getBoundingClientRect(),o+=n.x,o*=n.width/e.width,r+=n.y,r*=n.height/e.height),{x:o,y:r}},e.prototype.toPixels=function(t){var e,n,o,r;return o=t.x,r=t.y,this.svg.el.hasAttribute("viewBox")&&(n=this.svg.el.viewBox.animVal,e=this.sizeRect.el.getBoundingClientRect(),o/=n.width/e.width,o-=n.x,r/=n.height/e.height,r-=n.y),{x:o,y:r}},e.prototype.rescale=function(t,e,n,o){return this.svg.attr("viewBox",""+t+" "+e+" "+n+" "+o),this.rescaleTools()},e.prototype.rescaleTools=function(){var t,e,n,o,r;for(o=this.tools,r=[],e=0,n=o.length;n>e;e++)t=o[e],r.push("function"==typeof t.rescale?t.rescale(this.getScale()):void 0);return r},e.prototype.getScale=function(){var t;return t=this.toScale({x:100,y:100}),2/(t.x/100+t.y/100)},e.prototype.getValue=function(){var t;return JSON.stringify(function(){var e,n,o,r;for(o=this.tools,r=[],e=0,n=o.length;n>e;e++)t=o[e],r.push(t.mark);return r}.call(this))},e.prototype.disable=function(){var t;return null!=(t=this.selection)&&t.deselect(),e.__super__.disable.apply(this,arguments)},e.prototype.reset=function(){for(;0!==this.tools.length;)this.tools[0].destroy();return null},e.prototype.destroy=function(){return this.reset(),removeEventListener("resize",this,!1),e.__super__.destroy.apply(this,arguments)},e}(o),a.defaultStyle=v("marking-surface-default-style",".marking-surface {\n  display: inline-block;\n  position: relative;\n}\n\n.marking-surface-svg {\n  display: block;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n}\n\n.marking-surface-input {\n  left: 0;\n  position: absolute;\n  opacity: 0;\n  pointer-events: none;\n  top: 0;\n}\n\n.marking-surface-tool-focusables-container {\n  height: 0;\n  left: 0;\n  overflow: hidden;\n  position: absolute;\n  top: 0;\n  width: 0;\n}\n\n.marking-surface-tool-controls-container {\n  left: 0;\n  position: absolute;\n  top: 0;\n}"),a.BaseClass=t,a.ElementBase=o,a.SVG=p,a.Mark=s,a.ToolFocusTarget=h,a.ToolControls=h,a.Tool=c,"undefined"!=typeof window&&null!==window&&(window.MarkingSurface=a),"undefined"!=typeof e&&null!==e&&(e.exports=a),"function"==typeof define&&define(function(){return a})}).call(this)},{}],7:[function(t,e){(function(){var n,o,r={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=(("undefined"!=typeof window&&null!==window?window.MarkingSurface:void 0)||t("marking-surface")).Tool,n=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.mark.x=0,this.mark.y=0,this.mark.angle=0,this.mark.rx=0,this.mark.ry=0,this.radii=this.addShape("path.radii",{stroke:"currentColor"}),this.outline=this.addShape("ellipse.outline",{fill:"transparent",stroke:"currentColor"}),this.xHandle=this.addShape("circle.x-handle",{fill:"currentColor"}),this.yHandle=this.addShape("circle.y-handle",{fill:"currentColor"}),this.addEvent("start",".outline",this.startDrag),this.addEvent("move",".outline",this.moveOutline),this.addEvent("move",".x-handle",this.dragXHandle),this.addEvent("move",".y-handle",this.dragYHandle)}return i(e,t),e.prototype.handleRadius=e.mobile?20:10,e.prototype.strokeWidth=2,e.prototype.defaultRadius=2,e.prototype.defaultSquash=.5,e.prototype.startOffset=null,e.prototype.rescale=function(t){var n,o;return e.__super__.rescale.apply(this,arguments),o=this.strokeWidth/t,n=this.handleRadius/t,this.radii.attr("strokeWidth",o/2),this.outline.attr("strokeWidth",o),this.xHandle.attr("r",n),this.yHandle.attr("r",n)},e.prototype.onInitialStart=function(t){var n,o,r;return e.__super__.onInitialStart.apply(this,arguments),r=this.coords(t),n=r.x,o=r.y,this.mark.set({x:n,y:o,rx:this.defaultRadius,ry:this.defaultRadius*this.defaultSquash})},e.prototype.onInitialMove=function(t){return e.__super__.onInitialMove.apply(this,arguments),this.dragXHandle(t),this.mark.set("ry",this.mark.rx*this.defaultSquash)},e.prototype.startDrag=function(t){var e,n,o;return o=this.coords(t),e=o.x,n=o.y,this.startOffset={x:this.mark.x-e,y:this.mark.y-n}},e.prototype.moveOutline=function(t){var e,n,o;return o=this.coords(t),e=o.x,n=o.y,this.mark.set({x:e+this.startOffset.x,y:n+this.startOffset.y})},e.prototype.dragXHandle=function(t){var e,n,o;return o=this.coords(t),e=o.x,n=o.y,this.mark.set({angle:this.getAngle(this.mark.x,this.mark.y,e,n),rx:this.getDistance(this.mark.x,this.mark.y,e,n)})},e.prototype.dragYHandle=function(t){var e,n,o;return o=this.coords(t),e=o.x,n=o.y,this.mark.set({angle:this.getAngle(this.mark.x,this.mark.y,e,n)-90,ry:this.getDistance(this.mark.x,this.mark.y,e,n)})},e.prototype.render=function(){var t;return e.__super__.render.apply(this,arguments),this.attr("transform","translate("+this.mark.x+", "+this.mark.y+") rotate("+-this.mark.angle+")"),this.radii.attr("d","M 0 "+-this.mark.ry+" L 0 0 M "+this.mark.rx+" 0 L 0 0"),this.outline.attr({rx:this.mark.rx,ry:this.mark.ry}),this.xHandle.attr("cx",this.mark.rx),this.yHandle.attr("cy",-this.mark.ry),null!=(t=this.controls)?t.moveTo(this.mark):void 0},e.prototype.getAngle=function(t,e,n,o){var r,i;return r=n-t,i=o-e,Math.atan2(i,r)*(-180/Math.PI)},e.prototype.getDistance=function(t,e,n,o){var r,i;return r=Math.pow(n-t,2),i=Math.pow(o-e,2),Math.sqrt(r+i)},e}(o),"undefined"!=typeof window&&null!==window&&(window.MarkingSurface.EllipseTool=n),"undefined"!=typeof e&&null!==e&&(e.exports=n)}).call(this)},{"marking-surface":6}],8:[function(t,e){(function(){var n,o,r={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=(("undefined"!=typeof window&&null!==window?window.MarkingSurface:void 0)||t("marking-surface")).Tool,n=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.mark.x=0,this.mark.y=0,this.ticks=this.addShape("path",{stroke:"currentColor"}),this.disc=this.addShape("circle",{fill:"transparent",stroke:"currentColor"}),this.addEvent("move","circle",this.onMove)}return i(e,t),e.prototype.radius=e.mobile?25:15,e.prototype.strokeWidth=2,e.prototype.rescale=function(t){var n,o;return e.__super__.rescale.apply(this,arguments),n=this.radius/t,o=this.strokeWidth/t,this.ticks.attr({d:"M "+-n+" 0 L "+-n*(1/3)+" 0 M "+n+" 0 L "+n*(1/3)+" 0\nM 0 "+-n+" L 0 "+-n*(1/3)+" M 0 "+n+" L 0 "+n*(1/3),strokeWidth:o}),this.disc.attr({r:n,strokeWidth:o})},e.prototype.onInitialStart=function(t){return e.__super__.onInitialStart.apply(this,arguments),this.onInitialMove(t)},e.prototype.onInitialMove=function(t){return e.__super__.onInitialMove.apply(this,arguments),this.onMove(t)},e.prototype.onMove=function(t){var e,n,o;return o=this.coords(t),e=o.x,n=o.y,e-=10,n-=10,this.mark.set({x:e,y:n})},e.prototype.render=function(){var t;return e.__super__.render.apply(this,arguments),this.attr("transform","translate("+this.mark.x+", "+this.mark.y+")"),null!=(t=this.controls)?t.moveTo(this.mark):void 0},e}(o),"undefined"!=typeof window&&null!==window&&(window.MarkingSurface.PointTool=n),"undefined"!=typeof e&&null!==e&&(e.exports=n)}).call(this)},{"marking-surface":6}],9:[function(t,e){(function(){var n,o,r=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=(("undefined"!=typeof window&&null!==window?window.MarkingSurface:void 0)||t("marking-surface")).Tool,n=function(t){function e(){this.dragFromBottomLeft=r(this.dragFromBottomLeft,this),this.dragFromBottomRight=r(this.dragFromBottomRight,this),this.dragFromTopRight=r(this.dragFromTopRight,this),this.dragFromTopLeft=r(this.dragFromTopLeft,this);var t;e.__super__.constructor.apply(this,arguments),this.mark.left=0,this.mark.top=0,this.mark.width=0,this.mark.height=0,this.outline=this.addShape("rect.outline",{fill:"transparent",stroke:"currentColor"}),this.addEvent("start",".outline",this.startDrag),this.addEvent("move",".outline",this.moveOutline),t={r:this.handleSize,fill:"currentColor",stroke:"transparent"},this.topLeftHandle=this.addShape("circle.top-left.handle",t),this.topRightHandle=this.addShape("circle.top-right.handle",t),this.bottomRightHandle=this.addShape("circle.bottom-right.handle",t),this.bottomLeftHandle=this.addShape("circle.bottom-left.handle",t),this.addEvent("start",".top-left.handle",this.startTopLeftHandle),this.addEvent("start",".top-right.handle",this.startTopRightHandle),this.addEvent("start",".bottom-right.handle",this.startBottomRightHandle),this.addEvent("start",".bottom-left.handle",this.startBottomLeftHandle),this.addEvent("move",".handle",this.moveAnyHandle),this.handles=[this.topLeftHandle,this.topRightHandle,this.bottomRightHandle,this.bottomLeftHandle]}var n;return s(e,t),e.prototype.handleSize=e.mobile?14:7,e.prototype.strokeWidth=2,n=null,e.prototype.pointerOffsetFromShape=null,e.prototype.rescale=function(t){var n,o,r,i,s,a,l;for(e.__super__.rescale.apply(this,arguments),r=this.strokeWidth/t,o=this.handleSize/t,this.outline.attr("strokeWidth",r),a=this.handles,l=[],i=0,s=a.length;s>i;i++)n=a[i],l.push(n.attr({r:o,strokeWidth:r}));return l},e.prototype.onInitialStart=function(t){return e.__super__.onInitialStart.apply(this,arguments),this.startDrag(t),this.mark.set({left:this.startOffset.x,top:this.startOffset.y})},e.prototype.onInitialMove=function(t){return e.__super__.onInitialMove.apply(this,arguments),this.moveAnyHandle(t)},e.prototype.startDrag=function(t){return this.startOffset=this.coords(t),this.shapeOffset={x:this.startOffset.x-this.mark.left,y:this.startOffset.y-this.mark.top}},e.prototype.moveOutline=function(t){var e,n,o;return o=this.coords(t),e=o.x,n=o.y,this.mark.set({left:e-this.shapeOffset.x,top:n-this.shapeOffset.y})},e.prototype.startTopLeftHandle=function(){return this.startOffset={x:this.mark.left+this.mark.width,y:this.mark.top+this.mark.height}},e.prototype.startTopRightHandle=function(){return this.startOffset={x:this.mark.left,y:this.mark.top+this.mark.height}},e.prototype.startBottomRightHandle=function(){return this.startOffset={x:this.mark.left,y:this.mark.top}},e.prototype.startBottomLeftHandle=function(){return this.startOffset={x:this.mark.left+this.mark.width,y:this.mark.top}},e.prototype.moveAnyHandle=function(t){var e,n,o,r;return r=this.coords(t),n=r.x,o=r.y,e=n<this.startOffset.x&&o<this.startOffset.y?"dragFromTopLeft":n>=this.startOffset.x&&o<this.startOffset.y?"dragFromTopRight":n>=this.startOffset.x&&o>=this.startOffset.y?"dragFromBottomRight":n<this.startOffset.x&&o>=this.startOffset.y?"dragFromBottomLeft":void 0,this[e](t)},e.prototype.dragFromTopLeft=function(t){var e,n,o;return o=this.coords(t),e=o.x,n=o.y,e-=this.handleSize/2,n-=this.handleSize/2,this.mark.set({left:e,top:n,width:this.mark.width+(this.mark.left-e),height:this.mark.height+(this.mark.top-n)})},e.prototype.dragFromTopRight=function(t){var e,n,o;return o=this.coords(t),e=o.x,n=o.y,e+=this.handleSize/2,n-=this.handleSize/2,this.mark.set({top:n,width:e-this.mark.left,height:this.mark.height+(this.mark.top-n)})
},e.prototype.dragFromBottomRight=function(t){var e,n,o;return o=this.coords(t),e=o.x,n=o.y,e+=this.handleSize/2,n+=this.handleSize/2,this.mark.set({width:e-this.mark.left,height:n-this.mark.top})},e.prototype.dragFromBottomLeft=function(t){var e,n,o;return o=this.coords(t),e=o.x,n=o.y,e-=this.handleSize/2,n+=this.handleSize/2,this.mark.set({left:e,width:this.mark.width+(this.mark.left-e),height:n-this.mark.top})},e.prototype.render=function(){var t;return e.__super__.render.apply(this,arguments),this.outline.attr({x:this.mark.left,y:this.mark.top,width:this.mark.width,height:this.mark.height}),this.topLeftHandle.attr({cx:this.mark.left,cy:this.mark.top}),this.topRightHandle.attr({cx:this.mark.left+this.mark.width,cy:this.mark.top}),this.bottomRightHandle.attr({cx:this.mark.left+this.mark.width,cy:this.mark.top+this.mark.height}),this.bottomLeftHandle.attr({cx:this.mark.left,cy:this.mark.top+this.mark.height}),null!=(t=this.controls)?t.moveTo([this.mark.left+this.mark.width,this.mark.top]):void 0},e}(o),"undefined"!=typeof window&&null!==window&&(window.MarkingSurface.RectangleTool=n),"undefined"!=typeof e&&null!==e&&(e.exports=n)}).call(this)},{"marking-surface":6}],10:[function(t,e){(function(){var n,o,r,i,s,a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};s=("undefined"!=typeof window&&null!==window?window.MarkingSurface:void 0)||t("marking-surface"),o=s.ToolControls,n=s.RectangleTool,r=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.textarea=this.el.querySelector("textarea"),this.addEvent("input","textarea",this.onChangeTextarea)}return l(e,t),e.prototype.template='<textarea style="height: 3em; width: 100%"></textarea>',e.prototype.onChangeTextarea=function(){return this.tool.mark.set("content",this.textarea.value)},e.prototype.onToolSelect=function(){return e.__super__.onToolSelect.apply(this,arguments),this.textarea.style.display=""},e.prototype.onToolDeselect=function(){return e.__super__.onToolDeselect.apply(this,arguments),this.textarea.style.display="none"},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.el.style.width=""+this.tool.mark.width+"px"},e}(o),i=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.mark.content=""}return l(e,t),e.Controls=r,e.prototype.onInitialRelease=function(){var t;return e.__super__.onInitialRelease.apply(this,arguments),null!=(t=this.controls)?t.textarea.focus():void 0},e.prototype.render=function(){var t;return e.__super__.render.apply(this,arguments),null!=(t=this.controls)?t.moveTo({x:this.mark.left,y:this.mark.top+this.mark.height}):void 0},e}(n),"undefined"!=typeof window&&null!==window&&(window.MarkingSurface.TranscriptionTool=i),"undefined"!=typeof e&&null!==e&&(e.exports=i)}).call(this)},{"marking-surface":6}],11:[function(t,e){(function(){var t,n,o,r,i,s,a;n=function(t,e,n){var o;return o=document.createEvent("CustomEvent"),o.initCustomEvent(e,!0,!0,n),t.dispatchEvent(o)},s=!1,o=function(){return s=!1},r=function(){return s=!0,setTimeout(o,50)},addEventListener("click",r,!1),a={},i=function(){return a[location.hash]={x:pageXOffset,y:pageYOffset}},addEventListener("scroll",i,!1),t=function(){function t(t){var e,n;null==t&&(t={}),null==this.el&&(this.el=document.createElement(this.tagName)),this.el.className=this.className,this.hashes={};for(e in t)n=t[e],"#"===e.charAt(0)||e===this.notFoundKey?this.add(e,n):this[e]=n;addEventListener("hashchange",this,!1),this.onHashChange(),null==this.current&&this["default"]in this.hashes&&this.activate(this.hashes[this["default"]],{initial:!0})}return t.prototype.hashes=null,t.prototype["default"]="#/",t.prototype.changeDisplay=!0,t.prototype.functionsAreConstructors=!0,t.prototype.tagName="div",t.prototype.className="stack-of-pages",t.prototype.activatedAttr="data-active-in-stack",t.prototype.hashRootAttr="data-location-hash",t.prototype.activateEvent="activate-in-stack",t.prototype.deactivateEvent="deactivate-in-stack",t.prototype.notFoundKey="notFound",t.prototype.el=null,t.prototype.current=null,t.prototype.add=function(t,e){var n;if(n=this.findElement(e),null!=n)return null!=t&&(this.hashes[t]=n),this.el.appendChild(n),this.deactivate(n,{initial:!0});throw new Error("Couldn't determine element for "+t)},t.prototype.findElement=function(t){var e,n;return"function"==typeof t&&(t=this.functionsAreConstructors?new t:t.call(this,this)),("string"==(n=typeof t)||"number"===n||"boolean"===n)&&(e=document.createElement("div"),e.innerHTML=t,t=e.children[0]),"el"in t&&(t.el instanceof Element?t=t.el:"jquery"in t.el&&(t=t.el.get(0))),t instanceof Element?t:void 0},t.prototype.handleEvent=function(t){var e;return e=function(){switch(t.type){case"hashchange":return this.onHashChange}}.call(this),null!=e?e.apply(this,arguments):void 0},t.prototype.onHashChange=function(){var t,e,n,o,r,i,l,u,p,c,h,d,f,g,v,m,y,w;t=location.hash||this["default"],!s&&t in a||(a[t]={x:0,y:0}),y=a[t],f=y.x,g=y.y,setTimeout(function(){return scrollTo(f,g)}),n=!1,c={},w=this.hashes;for(o in w){if(e=w[o],h=["hash"],i=o.split("/"),r=function(){var t,e,n;for(n=[],t=0,e=i.length;e>t;t++)switch(d=i[t],d.charAt(0)){case":":h.push(d.slice(1)),n.push("?([^/]*)");break;case"*":h.push("_"),n.push("?(.*)");break;default:n.push(d)}return n}(),c.hashPattern="^"+r.join("/")+"/?$",u=t.match(c.hashPattern),null!=u){for(n=!0,l=v=0,m=h.length;m>v;l=++v)p=h[l],c[p]=u[l];this.activate(e,c),document.body.parentNode.setAttribute(this.hashRootAttr,o)}if(n)break}return!n&&(c.notFound=!0,this.notFoundKey in this.hashes)?this.activate(this.hashes[this.notFoundKey],c):void 0},t.prototype.activate=function(t,e){var o;return null!=this.current&&this.deactivate(this.current,e),this.current=t,t.setAttribute(this.activatedAttr,null!=(o=e.hash)?o:e.initial),this.changeDisplay&&(t.style.display=""),n(t,this.activateEvent,e)},t.prototype.deactivate=function(t,e){return t.removeAttribute(this.activatedAttr),this.changeDisplay&&(t.style.display="none"),n(t,this.deactivateEvent,e)},t.prototype.destroy=function(){return removeEventListener("hashchange",this,!1),this.el.parentNode.removeChild(this.el)},t}(),window.StackOfPages=t,"undefined"!=typeof e&&null!==e&&(e.exports=t)}).call(this)},{}],12:[function(t,e){(function(){var n,o,r,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=null!=(r=window.DecisionTree)?r:t("./decision-tree"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.type="button",e.prototype.chosenButton=null,e.prototype.choiceTemplate=function(t,e){return"<button type='button' name='"+this.key+"' value='"+t.value+"' data-choice-index='"+e+"'>"+t.label+"</button>"},e.prototype.renderTemplate=function(){return e.__super__.renderTemplate.apply(this,arguments),this.el.querySelector(".decision-tree-confirmation").style.display="none"},e.prototype.enter=function(){return e.__super__.enter.apply(this,arguments),this.el.addEventListener("click",this,!1)},e.prototype.exit=function(){return e.__super__.exit.apply(this,arguments),this.el.removeEventListener("click",this,!1)},e.prototype.reset=function(t){var e,n,o,r,i,s,a;if(null!=t){for(s=this.choices,o=r=0,i=s.length;i>r;o=++r)e=s[o],e.value===t&&(n=o);return null!=(a=this.el.querySelector("[data-choice-index='"+n+"']"))?a.focus():void 0}},e.prototype.handleEvent=function(t){return e.__super__.handleEvent.apply(this,arguments),"click"===t.type&&t.target.name===this.key?(this.chosenButton=t.target,this.confirm()):void 0},e.prototype.getValue=function(){var t,e,n;return e=null!=(n=this.chosenButton)?n.getAttribute("data-choice-index"):void 0,t=this.choices[e],null!=t?t.value:void 0},e.prototype.getNext=function(){var t,e,n;return e=null!=(n=this.chosenButton)?n.getAttribute("data-choice-index"):void 0,t=this.choices[e],"next"in t?t.next:this.next},e}(o.Task),o.registerTask(n),o.ButtonTask=n,"undefined"!=typeof e&&null!==e&&(e.exports=n)}).call(this)},{"./decision-tree":14}],13:[function(t,e){(function(){var n,o,r,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=null!=(r=window.DecisionTree)?r:t("./decision-tree"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.type="checkbox",e.prototype.choiceTemplate=function(t,e){return"<label> <input type='checkbox' name='"+this.key+"' value='"+t.value+"' data-choice-index='"+e+"' /> "+t.label+" </label>"},e.prototype.getValue=function(){var t,e,n,o,r,i,s;for(t=this.el.querySelectorAll(":checked"),s=[],r=0,i=t.length;i>r;r++)o=t[r],n=o.getAttribute("data-choice-index"),e=this.choices[n],s.push(e.value);return s},e.prototype.reset=function(t){var e,n,o,r,i,s,a,l,u,p,c,h,d,f;for(h=this.el.querySelectorAll("input:checked"),s=0,u=h.length;u>s;s++)r=h[s],r.checked=!1;if(null!=t){for(f=[],a=0,p=t.length;p>a;a++){for(i=t[a],d=this.choices,o=l=0,c=d.length;c>l;o=++l)e=d[o],e.value===i&&(n=o);f.push(this.el.querySelector("[data-choice-index='"+n+"']").checked=!0)}return f}},e}(o.Task),o.registerTask(n),o.CheckboxTask=n,"undefined"!=typeof e&&null!==e&&(e.exports=n)}).call(this)},{"./decision-tree":14}],14:[function(t,e){(function(){var t,n,o,r={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s=[].slice;t=function(){function t(){}return t.prototype.dispatchEvent=function(t,e){var n;return n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,e),this.el.dispatchEvent(n)},t}(),o=function(t){function e(t){var e,n;null==t&&(t={});for(e in t)n=t[e],this[e]=n;null==this.choices&&(this.choices=[]),this.createRoot(),this.hide()}return i(e,t),e.type="base",e.prototype.key="",e.prototype.question="",e.prototype.choices=null,e.prototype.next=null,e.prototype.confirmButtonLabel="OK",e.prototype.confirmButtonName="decision-tree-confirm-task",e.prototype.CONFIRM="decision-tree:task-confirm",e.prototype.template=function(){var t,e;return"<div class='decision-tree-question'>"+this.question+"</div> <div class='decision-tree-choices'> "+function(){var n,o,r,i;for(r=this.choices,i=[],e=n=0,o=r.length;o>n;e=++n)t=r[e],i.push("<div class='decision-tree-choice'>"+this.choiceTemplate(t,e)+"</div>");return i}.call(this).join("\n")+" </div> <div class='decision-tree-confirmation'> <button type='button' name='"+this.confirmButtonName+"'>"+this.confirmButtonLabel+"</button> </div>"},e.prototype.choiceTemplate=function(t,e){return"<div>"+e+": "+t.label+" ("+t.value+")</div>"},e.prototype.createRoot=function(){return this.el=document.createElement("div"),this.el.className="decision-tree-task",this.el.setAttribute("data-task-type",this.constructor.type)},e.prototype.renderTemplate=function(){return this.el.innerHTML=this.template(),this.setUpConfirmButton()},e.prototype.setUpConfirmButton=function(){return this.confirmButton=this.el.querySelector("button[name='"+this.confirmButtonName+"']"),this.confirmButton.addEventListener("click",this)},e.prototype.handleEvent=function(t){return"click"===t.type&&t.currentTarget===this.confirmButton?this.confirm():void 0},e.prototype.enter=function(){return this.show(),this.el.addEventListener("click",this,!1)},e.prototype.exit=function(){return this.el.removeEventListener("click",this,!1),this.hide()},e.prototype.show=function(){return this.el.style.display=""},e.prototype.hide=function(){return this.el.style.display="none"},e.prototype.confirm=function(){return this.dispatchEvent(this.CONFIRM,this.getValue())},e.prototype.getValue=function(){throw new Error("Define Task::getValue for "+this.constructor.type)},e.prototype.getNext=function(){return this.next},e.prototype.reset=function(){throw new Error("Define Task::reset for "+this.constructor.type)},e}(t),n=function(t){function e(t){var e,n,o,r;null==t&&(t={}),this.taskTypes=Object.create(this.constructor.taskTypes),this.taskChain=[],this.valueChain=[];for(e in t)if(r=t[e],"tasks"===e)this.tasks=Object.create(r);else if("taskTypes"===e)for(o in r)n=r[o],this.registerTask(o,n);else this[e]=r;this.createRoot(),this.name&&this.createInput(),this.createBackButton(),this.addTasks(),this.reset()}return i(e,t),e.taskTypes={},e.registerTask=function(){var t,e,n,o;return n=2<=arguments.length?s.call(arguments,0,o=arguments.length-1):(o=0,[]),t=arguments[o++],e=n[0],null==e&&(e=t.type),this.taskTypes[e]=t},e.prototype.name="",e.prototype.tasks=null,e.prototype.firstTask=null,e.prototype.backLabel="Back",e.prototype.LOAD_TASK="decision-tree:load-task",e.prototype.CHANGE="decision-tree:change-values",e.prototype.COMPLETE="decision-tree:complete-tree",e.prototype.RESET="decision-tree:reset-tree",e.prototype.currentTask=null,e.prototype.taskChain=null,e.prototype.valueChain=null,e.prototype.registerTask=e.registerTask,e.prototype.createRoot=function(){return this.el=document.createElement("div"),this.el.className="decision-tree",this.el.addEventListener("change",this,!1),this.el.addEventListener(o.prototype.CONFIRM,this,!1)},e.prototype.createInput=function(){return this.input=document.createElement("input"),this.name&&(this.input.name=this.name),this.el.appendChild(this.input)},e.prototype.createBackButton=function(){return this.backButton=document.createElement("button"),this.backButton.type="button",this.backButton.name="decision-tree-go-back",this.backButton.innerHTML=this.backLabel,this.backButton.addEventListener("click",this,!1),this.el.appendChild(this.backButton)},e.prototype.addTasks=function(){var t,e,n,r;n=this.tasks,r=[];for(e in n){if(t=n[e],!(t instanceof o)){if(null==this.taskTypes[t.type])throw new Error("No registered task "+t.type);t=new this.taskTypes[t.type](t),this.tasks[e]=t}t.key||(t.key=e),t.renderTemplate(),r.push(this.el.appendChild(t.el))}return r},e.prototype.handleEvent=function(t){var e;return"click"===t.type&&t.currentTarget===this.backButton?this.goBack():(e=function(){switch(t.type){case"change":return this.handleChange;case o.prototype.CONFIRM:return this.handleTaskConfirm}}.call(this),null!=e?e.call(this,t):void 0)},e.prototype.handleChange=function(){return this.syncCurrentValue(this.currentTask.getValue())},e.prototype.handleTaskConfirm=function(t){var e;return this.syncCurrentValue(t.detail),this.loadTask(null!=(e=this.currentTask)?e.getNext():void 0)},e.prototype.loadTask=function(t,e){var n;return null!=(n=this.currentTask)&&n.exit(),this.currentTask=null,"function"==typeof t?this.loadTask(t,e):"string"==typeof t?this.loadTask(this.tasks[t],e):null!=t?(this.currentTask=t,this.currentTask.reset(e),this.taskChain.push(this.currentTask.key),this.valueChain.push(this.currentTask.getValue()),this.currentTask.enter(),this.backButton.disabled=1===this.taskChain.length,this.dispatchEvent(this.LOAD_TASK,{task:this.currentTask,index:this.taskChain.length-1}),this.syncCurrentValue(this.valueChain[this.valueChain.length-1])):this.complete()},e.prototype.goBack=function(){return 1!==this.taskChain.length?(this.taskChain.pop(),this.valueChain.pop(),this.loadTask(this.taskChain.pop(),this.valueChain.pop())):void 0},e.prototype.complete=function(){return this.dispatchEvent(this.COMPLETE,{value:this.getValues()})},e.prototype.syncCurrentValue=function(t){var e,n;return this.valueChain[this.valueChain.length-1]=t,null!=(e=this.input)&&(e.value=JSON.stringify(this.getValues())),this.dispatchEvent(this.CHANGE,{key:null!=(n=this.currentTask)?n.key:void 0,value:this.valueChain[this.valueChain.length-1]})},e.prototype.getValues=function(){var t,e,n,o,r,i,s,a;for(i=this.taskChain,a=[],t=o=0,r=i.length;r>o;t=++o)e=i[t],n={},n[e]=null!=(s=this.valueChain[t])?s:null,a.push(n);return a},e.prototype.reset=function(t){var e,n,o;null==t&&(t=this.firstTask),o=this.tasks;for(n in o)e=o[n],e.reset();return this.taskChain.splice(0),this.valueChain.splice(0),this.dispatchEvent(this.RESET),null!=t?this.loadTask(t):this.syncCurrentValue()},e}(t),n.Task=o,window.DecisionTree=n,"undefined"!=typeof e&&null!==e&&(e.exports=n)}).call(this)},{}],15:[function(t,e){(function(){var n,o,r,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=null!=(r=window.DecisionTree)?r:t("./decision-tree"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.type="radio",e.prototype.choiceTemplate=function(t,e){return"<label> <input type='radio' name='"+this.key+"' value='"+t.value+"' data-choice-index='"+e+"'' /> "+t.label+" </label>"},e.prototype.getChoice=function(){var t,e;return t=this.el.querySelector(":checked"),e=null!=t?t.getAttribute("data-choice-index"):void 0,this.choices[e]},e.prototype.getValue=function(){var t;return null!=(t=this.getChoice())?t.value:void 0},e.prototype.getNext=function(){var t,n;return t=this.getChoice(),n=null!=t&&"next"in t?t.next:e.__super__.getNext.apply(this,arguments)},e.prototype.reset=function(t){var e,n,o,r,i,s,a;if(null!=(s=this.el.querySelector("input:checked"))&&(s.checked=!1),null!=t){for(a=this.choices,o=r=0,i=a.length;i>r;o=++r)e=a[o],e.value===t&&(n=o);return this.el.querySelector("[data-choice-index='"+n+"']").checked=!0}},e}(n.Task),n.registerTask(o),n.RadioTask=o,"undefined"!=typeof e&&null!==e&&(e.exports=o)}).call(this)},{"./decision-tree":14}],16:[function(t,e){(function(){var n,o,r,i,s,a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u=[].slice;null==window.zooniverse&&(window.zooniverse={}),null==(s=window.zooniverse).controllers&&(s.controllers={}),r=window.zooniverse.EventEmitter||t("../lib/event-emitter"),n=window.jQuery,i=0,o=function(t){function e(t){var o,r;null==t&&(t={}),e.__super__.constructor.apply(this,arguments);for(o in t)a.call(t,o)&&(r=t[o],o in this&&(this[o]=r));this.id||(this.id="controller_"+i),i+=1,null==this.el&&(this.el=document.createElement(this.tagName)),this.el=n(this.el),this.renderTemplate(),this.delegateEvents(),this.nameElements()}return l(e,t),e.prototype.el=null,e.prototype.tagName="div",e.prototype.className="",e.prototype.template=null,e.prototype.id="",e.prototype.events=null,e.prototype.elements=null,e.prototype.renderTemplate=function(){return this.className&&this.el.addClass(this.className),this.el.html()||("string"==typeof this.template&&this.el.html(this.template),"function"!=typeof this.template)?void 0:this.el.html(this.template(this))},e.prototype.nameElements=function(){var t,e,n,o;if(null!=this.elements){n=this.elements,o=[];for(e in n)t=n[e],o.push(this[t]=this.el.find(e));return o}},e.prototype.delegateEvents=function(){var t,e,n,o,r=this;if(this.el.off("."+this.id),null!=this.events){n=this.events,o=[];for(t in n)e=n[t],o.push(function(t,e){var n,o,i,s;return s=t.split(/\s+/),o=s[0],i=2<=s.length?u.call(s,1):[],i=i.join(" "),"*"===o.slice(-1)&&(o=o.slice(0,-1),n=!0),"string"==typeof e&&(e=r[e]),r.el.on(""+o+"."+r.id,i,function(t){return n&&t.preventDefault(),e.call.apply(e,[r].concat(u.call(arguments)))})}(t,e));return o}},e.prototype.destroy=function(){var t,n,o;if(null!=this.elements){o=this.elements;for(n in o)t=o[n],this[t]=null}return this.el.off(),this.el.empty(),this.el.remove(),e.__super__.destroy.apply(this,arguments)},e}(r),window.zooniverse.controllers.BaseController=o,"undefined"!=typeof e&&null!==e&&(e.exports=o)}).call(this)},{"../lib/event-emitter":29}],17:[function(t,e){(function(){var n,o,r,i,s,a,l={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};null==window.zooniverse&&(window.zooniverse={}),null==(s=window.zooniverse).controllers&&(s.controllers={}),null==(a=window.zooniverse).views&&(a.views={}),n=zooniverse.controllers.BaseController||t("./base-controller"),r=zooniverse.views.dialog||t("../views/dialog"),i=zooniverse.translate||t("../lib/translate"),o=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.el.css({display:"none"}),this.warning&&this.el.addClass("warning"),this.error&&this.el.addClass("error"),this.contentContainer.append(this.content),this.el.appendTo(document.body)}return u(e,t),e.prototype.warning=!1,e.prototype.error=!1,e.prototype.content="",e.prototype.className="zooniverse-dialog",e.prototype.template=r,e.prototype.events={'click button[name="close-dialog"]':"hide",keydown:"onKeyDown"},e.prototype.elements={".dialog":"contentContainer"},e.prototype.onKeyDown=function(t){var e;return e=t.which,27===e?this.hide():void 0},e.prototype.show=function(){var t,e,n,o,r=this;for(o=this.el.get(0).querySelectorAll("["+i.attr+"]"),e=0,n=o.length;n>e;e++)t=o[e],i.refresh(t);return this.el.css({display:""}),setTimeout(function(){return r.el.addClass("showing")}),this.contentContainer.find("input, textarea, select").first().focus()},e.prototype.hide=function(){var t=this;return this.el.removeClass("showing"),setTimeout(function(){return t.el.css({display:"none"})},500)},e}(n),window.zooniverse.controllers.Dialog=o,"undefined"!=typeof e&&null!==e&&(e.exports=o)}).call(this)},{"../lib/translate":32,"../views/dialog":46,"./base-controller":16}],18:[function(t,e){(function(){var n,o,r,i,s=function(t,e){return function(){return t.apply(e,arguments)}},a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};o=(null!=(i=zooniverse.util)?i.toggleClass:void 0)||t("../util/toggle-class"),n=function(){function t(t){var e,n;null==t&&(t={}),this.onResize=s(this.onResize,this),this.onButtonClick=s(this.onButtonClick,this),window.dropdown=this;for(e in t)n=t[e],this[e]=n;null==this.button&&(this.button=document.createElement(this.buttonTag)),o(this.button,this.constructor.buttonClass,!0),this.className&&o(this.button,this.className,!0),this.button.addEventListener("click",this.onButtonClick,!1),null==this.menu&&(this.menu=document.createElement(this.menuTag)),o(this.menu,this.constructor.menuClass,!0),this.menuClass&&o(this.menu,this.menuClass,!0),this.menu.style.position="absolute",this.menu.style.display="none",document.body.appendChild(this.menu),this.close(),this.constructor.instances.push(this),this.constructor.elements.push(this.button),this.constructor.elements.push(this.menu)}return t.buttonClass="zooniverse-dropdown-button",t.menuClass="zooniverse-dropdown-menu",t.instances=[],t.elements=[],t.closeAll=function(t){var e,n,o,r,i,s;for(e=(null!=t?t:{}).except,i=this.instances,s=[],o=0,r=i.length;r>o;o++)n=i[o],s.push(n!==e?n.close():void 0);return s},addEventListener("mousedown",function(e){var n,o;for(o=!0,n=e.target.correspondingUseElement||e.target;null!=n;){if(a.call(t.elements,n)>=0){o=!1;break}n=n.parentNode}return o?t.closeAll():void 0}),t.prototype.button=null,t.prototype.buttonClass="",t.prototype.buttonTag="button",t.prototype.menu=null,t.prototype.menuClass="",t.prototype.menuTag="div",t.prototype.buttonPinning=[.5,1],t.prototype.menuPinning=[.5,0],t.prototype._open=null,t.prototype.openClass="open",t.prototype.animationDelay=250,t.prototype.onButtonClick=function(){return this.toggle()},t.prototype.toggle=function(){return this._open?this.close():this.open()},t.prototype.open=function(){var t=this;return this.constructor.closeAll({except:this}),o(this.button,this.openClass,!0),this.menu.style.display="",this.positionMenu(),setTimeout(function(){return o(t.menu,t.openClass,!0),t._open=!0}),addEventListener("resize",this.onResize,!1)},t.prototype.positionMenu=function(){var t;return t=this.button.getBoundingClientRect(),this.menu.style.left=t.left+pageXOffset+this.button.offsetWidth*this.buttonPinning[0]-this.menu.offsetWidth*this.menuPinning[0]+"px",this.menu.style.top=t.top+pageYOffset+this.button.offsetHeight*this.buttonPinning[1]-this.menu.offsetHeight*this.menuPinning[1]+"px"},t.prototype.onResize=function(){return this.positionMenu()},t.prototype.close=function(){var t=this;return o(this.button,this.openClass,!1),o(this.menu,this.openClass,!1),setTimeout(function(){return t.menu.style.display="none",t._open=!1},this.animationDelay),removeEventListener("resize",this.onResize,!1)},t.prototype.destroy=function(){var t,e;return this.constructor.instances.splice(this.constructor.instances.indexOf(this),1),this.constructor.elements.splice(this.constructor.instances.indexOf(this.button),1),this.constructor.elements.splice(this.constructor.instances.indexOf(this.menu),1),this.button.removeEventListener("click",this.onButtonClick,!1),null!=(t=this.button.parentNode)&&t.removeChild(this.button),null!=(e=this.menu.parentNode)?e.removeChild(this.menu):void 0},t}.call(this),null==window.zooniverse&&(window.zooniverse={}),null==(r=window.zooniverse).controllers&&(r.controllers={}),window.zooniverse.controllers.Dropdown=n,"undefined"!=typeof e&&null!==e&&(e.exports=n)}).call(this)},{"../util/toggle-class":44}],19:[function(t,e){(function(){var n,o,r,i,s,a,l,u,p,c,h,d,f,g,v,m=function(t,e){return function(){return t.apply(e,arguments)}},y={}.hasOwnProperty,w=function(t,e){function n(){this.constructor=t}for(var o in e)y.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=(null!=(u=window.zooniverse)&&null!=(p=u.controllers)?p.BaseController:void 0)||t("./base-controller"),s=(null!=(c=window.zooniverse)&&null!=(h=c.models)?h.User:void 0)||t("../models/user"),a=(null!=(d=window.zooniverse)&&null!=(f=d.views)?f.groupsMenu:void 0)||t("../views/groups-menu"),n=window.jQuery,r=(null!=(g=window.zooniverse)&&null!=(v=g.controllers)?v.Dropdown:void 0)||t("./dropdown"),i=function(t){function e(){this.onUserChangeGroup=m(this.onUserChangeGroup,this),this.onUserChange=m(this.onUserChange,this),e.__super__.constructor.apply(this,arguments),s.on("change",this.onUserChange),s.on("change-group",this.onUserChangeGroup)}return w(e,t),e.prototype.className="zooniverse-groups-menu",e.prototype.events={'click button[name="user-group"]':"onClickGroupButton"},e.prototype.onUserChange=function(t,e){return null!=e&&(this.el.html(a(e)),e.user_group_id)?this.el.find("button[name='"+e.user_group_id+"']").click():void 0},e.prototype.onUserChangeGroup=function(t,e,n){var o;return o=this.el.find('button[name="user-group"]'),o.removeClass("active"),null!=n?o.filter("[value='"+n.id+"']").addClass("active"):void 0},e.prototype.onClickGroupButton=function(t){var e,o;return e=n(t.currentTarget),null!=(o=s.current)&&o.setGroup(e.val()||"TODO_HOW_DO_I_STOP_CLASSIFYING_AS_PART_OF_A_GROUP"),r.closeAll()},e}(o),null==window.zooniverse&&(window.zooniverse={}),null==(l=window.zooniverse).controllers&&(l.controllers={}),window.zooniverse.controllers.GroupsMenu=i,"undefined"!=typeof e&&null!==e&&(e.exports=i)}).call(this)},{"../models/user":38,"../views/groups-menu":48,"./base-controller":16,"./dropdown":18}],20:[function(t,e){(function(){var n,o,r,i,s,a,l,u,p,c,h,d,f,g=function(t,e){return function(){return t.apply(e,arguments)}},v={}.hasOwnProperty,m=function(t,e){function n(){this.constructor=t}for(var o in e)v.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=(null!=(l=window.zooniverse)&&null!=(u=l.controllers)?u.BaseController:void 0)||t("./base-controller"),o=(null!=(p=window.zooniverse)&&null!=(c=p.controllers)?c.Dropdown:void 0)||t("./dropdown"),r=(null!=(h=window.zooniverse)?h.LanguageManager:void 0)||t("../lib/language-manager"),s=(null!=(d=window.zooniverse)&&null!=(f=d.views)?f.languagesMenu:void 0)||t("../views/languages-menu"),i=function(t){function e(){this.onClickLanguageButton=g(this.onClickLanguageButton,this);var t,n=this;e.__super__.constructor.apply(this,arguments),null!=(t=r.current)&&t.on("change-language",function(t,e){return n.setLanguageButton(e)})}return m(e,t),e.prototype.className="zooniverse-languages-menu",e.prototype.template=s,e.prototype.events={'click button[name="language"]':"onClickLanguageButton"},e.prototype.onClickLanguageButton=function(t){var e;return null!=(e=r.current)&&e.setLanguage(t.currentTarget.value),o.closeAll()},e.prototype.setLanguageButton=function(t){var e,n;return n=this.el.find('button[value="'+t+'"]'),0!==n.length?(e=this.el.find('button[name="language"]'),e.removeClass("active"),n.addClass("active")):void 0},e}(n),null==window.zooniverse&&(window.zooniverse={}),null==(a=window.zooniverse).controllers&&(a.controllers={}),window.zooniverse.controllers.LanguagesMenu=i,"undefined"!=typeof e&&null!==e&&(e.exports=i)}).call(this)},{"../lib/language-manager":30,"../views/languages-menu":50,"./base-controller":16,"./dropdown":18}],21:[function(t,e){(function(){var n,o,r,i,s,a;null==window.zooniverse&&(window.zooniverse={}),null==(a=window.zooniverse).controllers&&(a.controllers={}),n=zooniverse.controllers.Dialog||t("./dialog"),o=zooniverse.controllers.LoginForm||t("./login-form"),s=zooniverse.views.loginDialog||t("../views/login-dialog"),r=zooniverse.models.User||t("../models/user"),i=new n({content:new o({template:s}).el}),r.on("change",function(t,e){return null!=e?i.hide():void 0}),window.zooniverse.controllers.loginDialog=i,"undefined"!=typeof e&&null!==e&&(e.exports=i)}).call(this)},{"../models/user":38,"../views/login-dialog":51,"./dialog":17,"./login-form":22}],22:[function(t,e){(function(){var n,o,r,i,s,a,l,u,p,c,h={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var o in e)h.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};null==window.zooniverse&&(window.zooniverse={}),null==(u=window.zooniverse).controllers&&(u.controllers={}),null==(p=window.zooniverse).views&&(p.views={}),null==(c=window.zooniverse).models&&(c.models={}),o=zooniverse.controllers.BaseController||t("./base-controller"),a=zooniverse.views.loginForm||t("../views/login-form"),n=zooniverse.Api||t("../lib/api"),i=zooniverse.models.User||t("../models/user"),l=zooniverse.translate||t("../lib/translate"),s=zooniverse.controllers.signupDialog||t("./signup-dialog"),r=function(t){function e(){var t=this;e.__super__.constructor.apply(this,arguments),i.on("change",function(){return t.onUserChange.apply(t,arguments)})}return d(e,t),e.prototype.tagName="form",e.prototype.className="zooniverse-login-form",e.prototype.template=a,e.prototype.events={"submit*":"onSubmit",'click* button[name="sign-up"]':"onClickSignUp",'click* button[name="sign-out"]':"onClickSignOut"},e.prototype.elements={'input[name="username"]':"usernameInput",'input[name="password"]':"passwordInput",'button[type="submit"]':"signInButton",'button[name="sign-out"]':"signOutButton",".error-message":"errorContainer"},e.prototype.onSubmit=function(){var t,e=this;return this.el.addClass("loading"),this.signInButton.attr({disabled:!0}),t=i.login({username:this.usernameInput.val(),password:this.passwordInput.val()}),t.done(function(t){var n,o;return o=t.success,n=t.message,o?void 0:e.showError(n)}),t.fail(function(){return e.showError(l("signInFailed"))}),t.always(function(){return e.el.removeClass("loading"),setTimeout(function(){return e.signInButton.attr({disabled:null!=i.current})})})},e.prototype.onClickSignUp=function(){return s.show()},e.prototype.onClickSignOut=function(){return this.signOutButton.attr({disabled:!0}),i.logout()},e.prototype.onUserChange=function(t,e){return this.usernameInput.val((null!=e?e.name:void 0)||""),this.passwordInput.val((null!=e?e.api_key:void 0)||""),this.errorContainer.html(""),this.usernameInput.attr({disabled:null!=i.current}),this.passwordInput.attr({disabled:null!=i.current}),this.signInButton.attr({disabled:null!=i.current}),this.signOutButton.attr({disabled:null==i.current})},e.prototype.showError=function(t){return this.errorContainer.html(t)
},e}(o),window.zooniverse.controllers.LoginForm=r,"undefined"!=typeof e&&null!==e&&(e.exports=r)}).call(this)},{"../lib/api":28,"../lib/translate":32,"../models/user":38,"../views/login-form":52,"./base-controller":16,"./signup-dialog":25}],23:[function(t,e){(function(){var n,o,r,i,s,a,l,u=function(t,e){return function(){return t.apply(e,arguments)}},p={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var o in e)p.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};null==window.zooniverse&&(window.zooniverse={}),null==(a=window.zooniverse).controllers&&(a.controllers={}),null==(l=window.zooniverse).views&&(l.views={}),o=window.zooniverse.controllers.BaseController||t("./base-controller"),s=window.zooniverse.views.paginator||t("../views/paginator"),i=window.zooniverse.models.User||t("../models/user"),n=window.jQuery,r=function(t){function e(){this.onItemDestroyed=u(this.onItemDestroyed,this),this.onItemFromClassification=u(this.onItemFromClassification,this),this.onFetchFail=u(this.onFetchFail,this),this.onFetch=u(this.onFetch,this),this.onUserChange=u(this.onUserChange,this),e.__super__.constructor.apply(this,arguments),i.on("change",this.onUserChange),this.type.on("from-classification",this.onItemFromClassification),this.type.on("destroy",this.onItemDestroyed)}return c(e,t),e.prototype.type=null,e.prototype.itemTemplate=null,e.prototype.className="zooniverse-paginator",e.prototype.template=s,e.prototype.pages=0,e.prototype.perPage=10,e.prototype.events={'click button[name="page"]':"onClickPage"},e.prototype.elements={".items":"itemsContainer",".numbered":"numbersContainer"},e.prototype.onUserChange=function(t,e){var n;return this.reset((null!=e&&null!=(n=e.project)?n.classification_count:void 0)||0),this.onFetch([]),null!=e?this.goTo(1):void 0},e.prototype.reset=function(t){var e,o,r,i,s;for(this.pages=Math.ceil(t/this.perPage),this.numbersContainer.empty(),s=[],o=r=0,i=this.pages;i>=0?i>r:r>i;o=i>=0?++r:--r)e=n("<button name='page' value='"+(o+1)+"'>"+(o+1)+"</button>"),s.push(this.numbersContainer.append(e));return s},e.prototype.onClickPage=function(t){var e,o;return o=t.target,e=+n(o).val(),this.goTo(e)},e.prototype.goTo=function(t){var e,n=this;return t=Math.max(t,1),this.el.removeClass("failed"),this.numbersContainer.children().removeClass("active"),this.numbersContainer.children("[value='"+t+"']").addClass("active"),this.el.addClass("loading"),e=this.type.fetch({page:t,per_page:this.perPage}),e.then(this.onFetch,this.onFetchFail),e.always(function(){return n.el.removeClass("loading")})},e.prototype.onFetch=function(t){var e,n,o,r,i;for(this.itemsContainer.empty(),this.el.toggleClass("empty",0===t.length),i=[],o=0,r=t.length;r>o;o++)e=t[o],n=this.getItemEl(e),i.push(n.prependTo(this.itemsContainer));return i},e.prototype.getItemEl=function(t){var e,o,r,i;return o=this.itemsContainer.find("[data-item-id='"+t.id+"']"),0===o.length&&(e=null!=this.itemTemplate?this.itemTemplate(t):"<div class='item'><a href=\""+((null!=(r=t.subjects[0])?r.talkHref():void 0)||"#/SUBJECT-ERROR")+'">'+((null!=(i=t.subjects[0])?i.zooniverse_id:void 0)||"Error in subject")+"</a></div>",o=n(n.trim(e)),o.attr({"data-item-id":t.id})),o},e.prototype.onFetchFail=function(){return this.el.addClass("failed")},e.prototype.onItemFromClassification=function(t,e){var n,o;if(n=this.getItemEl(e),n.addClass("new"),n.prependTo(this.itemsContainer),this.itemsContainer.children().length>this.perPage){for(o=[];this.itemsContainer.children().length!==this.perPage;)o.push(this.itemsContainer.children().last().remove());return o}},e.prototype.onItemDestroyed=function(t,e){return this.getItemEl(e).remove()},e}(o),window.zooniverse.controllers.Paginator=r,"undefined"!=typeof e&&null!==e&&(e.exports=r)}).call(this)},{"../models/user":38,"../views/paginator":54,"./base-controller":16}],24:[function(t,e){(function(){var n,o,r,i,s,a,l,u,p,c,h,d,f={}.hasOwnProperty,g=function(t,e){function n(){this.constructor=t}for(var o in e)f.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};null==window.zooniverse&&(window.zooniverse={}),null==(h=window.zooniverse).controllers&&(h.controllers={}),null==(d=window.zooniverse).views&&(d.views={}),o=zooniverse.controllers.BaseController||t("./base-controller"),c=zooniverse.views.profile||t("../views/profile"),i=zooniverse.controllers.LoginForm||t("zooniverse/controllers/login-form"),s=zooniverse.controllers.Paginator||t("./paginator"),l=zooniverse.models.Recent||t("../models/recent"),r=zooniverse.models.Favorite||t("../models/favorite"),p=zooniverse.views.profileItem||t("../views/profile-item"),u=zooniverse.models.User||t("../models/user"),n=window.jQuery,a=function(t){function e(){var t=this;e.__super__.constructor.apply(this,arguments),this.loginForm=new i({el:this.el.find(".sign-in-form")}),this.recentsList=new s({type:l,perPage:12,className:""+s.prototype.className+" recents",el:this.el.find(".recents"),itemTemplate:this.recentTemplate}),this.favoritesList=new s({type:r,perPage:12,className:""+s.prototype.className+" favorites",el:this.el.find(".favorites"),itemTemplate:this.favoriteTemplate}),u.on("change",function(){return t.onUserChange.apply(t,arguments)})}return g(e,t),e.prototype.className="zooniverse-profile",e.prototype.template=c,e.prototype.recentTemplate=p,e.prototype.favoriteTemplate=p,e.prototype.loginForm=null,e.prototype.recentsList=null,e.prototype.favoritesList=null,e.prototype.events={'click button[name="unfavorite"]':"onClickUnfavorite",'click button[name="turn-page"]':"onTurnPage"},e.prototype.elements={nav:"navigation",'button[name="turn-page"]':"pageTurners"},e.prototype.onUserChange=function(t,e){return this.el.toggleClass("signed-in",null!=e),this.pageTurners.first().click()},e.prototype.onClickUnfavorite=function(t){var e,o,i;return i=n(t.currentTarget),o=i.val(),e=r.find(o),e["delete"](),i.parents("[data-item-id]").first().remove()},e.prototype.onTurnPage=function(t){var e,o;return this.pageTurners.removeClass("active"),e=n(t.currentTarget),e.addClass("active"),o=e.val(),this.recentsList.el.add(this.favoritesList.el).removeClass("active"),this[""+o+"List"].el.addClass("active")},e}(o),window.zooniverse.controllers.Profile=a,"undefined"!=typeof e&&null!==e&&(e.exports=a)}).call(this)},{"../models/favorite":35,"../models/recent":36,"../models/user":38,"../views/profile":56,"../views/profile-item":55,"./base-controller":16,"./paginator":23,"zooniverse/controllers/login-form":22}],25:[function(t,e){(function(){var n,o,r,i,s,a,l,u;null==window.zooniverse&&(window.zooniverse={}),null==(a=window.zooniverse).controllers&&(a.controllers={}),null==(l=window.zooniverse).views&&(l.views={}),null==(u=window.zooniverse).models&&(u.models={}),n=zooniverse.controllers.Dialog||t("./dialog"),o=zooniverse.controllers.SignupForm||t("./signup-form"),s=zooniverse.views.signupDialog||t("../views/signup-dialog"),r=zooniverse.models.User||t("../models/user"),i=new n({content:new o({template:s}).el}),r.on("change",function(t,e){return null!=e?i.hide():void 0}),window.zooniverse.controllers.signupDialog=i,"undefined"!=typeof e&&null!==e&&(e.exports=i)}).call(this)},{"../models/user":38,"../views/signup-dialog":57,"./dialog":17,"./signup-form":26}],26:[function(t,e){(function(){var n,o,r,i,s,a,l,u={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};null==window.zooniverse&&(window.zooniverse={}),null==(s=window.zooniverse).controllers&&(s.controllers={}),null==(a=window.zooniverse).models&&(a.models={}),n=zooniverse.controllers.BaseController||t("./base-controller"),r=zooniverse.models.User||t("../models/user"),i=zooniverse.translate||t("../lib/translate"),o=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.tagName="form",e.prototype.className="zooniverse-signup-form",e.prototype.events={"submit*":"onSubmit"},e.prototype.elements={'input[name="username"]':"usernameInput",'input[name="password"]':"passwordInput",'input[name="email"]':"emailInput",'input[name="real-name"]':"realNameInput",'button[type="submit"]':"signUpButton",".error-message":"errorContainer"},e.prototype.onSubmit=function(){var t,e=this;return this.el.addClass("loading"),this.signUpButton.attr({disabled:!0}),t=r.signup({username:this.usernameInput.val(),password:this.passwordInput.val(),email:this.emailInput.val(),real_name:this.realNameInput.val()}),t.done(function(t){var n,o;return o=t.success,n=t.message,o?void 0:e.showError(n)}),t.fail(function(){return e.showError(i("signInFailed"))}),t.always(function(){return e.el.removeClass("loading"),e.signUpButton.attr({disabled:!1})})},e.prototype.showError=function(t){return this.errorContainer.html(t)},e}(n),window.zooniverse.controllers.SignupForm=o,"undefined"!=typeof e&&null!==e&&(e.exports=o)}).call(this)},{"../lib/translate":32,"../models/user":38,"./base-controller":16}],27:[function(t,e){(function(){var n,o,r,i,s,a,l,u,p,c,h,d,f,g,v,m,y=function(t,e){return function(){return t.apply(e,arguments)}},w={}.hasOwnProperty,_=function(t,e){function n(){this.constructor=t}for(var o in e)w.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};null==window.zooniverse&&(window.zooniverse={}),null==(f=window.zooniverse).controllers&&(f.controllers={}),null==(g=window.zooniverse).views&&(g.views={}),null==(v=window.zooniverse).lib&&(v.lib={}),null==(m=window.zooniverse).models&&(m.models={}),o=zooniverse.controllers.BaseController||t("./base-controller"),c=zooniverse.controllers.loginDialog||t("./login-dialog"),h=zooniverse.controllers.signupDialog||t("./signup-dialog"),d=zooniverse.views.topBar||t("../views/top-bar"),r=zooniverse.controllers.Dropdown||t("./dropdown"),i=zooniverse.controllers.GroupsMenu||t("./groups-menu"),s=zooniverse.LanguageManager||t("../lib/language-manager"),a=zooniverse.controllers.LanguagesMenu||t("./languages-menu"),n=zooniverse.Api||t("../lib/api"),u=zooniverse.models.User||t("../models/user"),p="http://talk."+location.hostname.replace(/^www\./,"")+"/#/profile",l=function(t){function e(){this.onUserChangeGroup=y(this.onUserChangeGroup,this),this.getMessages=y(this.getMessages,this),this.onUserChange=y(this.onUserChange,this),e.__super__.constructor.apply(this,arguments),this.groupsMenu=new i,this.groupsDropdown=new r({button:this.groupsMenuButton.get(0),buttonPinning:[1,1],menu:this.groupsMenu.el.get(0),menuClass:"from-top-bar",menuPinning:[1,0]}),this.el.toggleClass("has-languages",null!=s.current),null!=s.current&&(this.languagesMenu=new a,this.languagesDropdown=new r({button:this.languagesMenuButton.get(0),buttonPinning:[1,1],menu:this.languagesMenu.el.get(0),menuClass:"from-top-bar",menuPinning:[1,0]})),u.on("change",this.onUserChange),u.on("change-group",this.onUserChangeGroup)}return _(e,t),e.prototype.className="zooniverse-top-bar",e.prototype.template=d,e.prototype.messageCheckTimeout=12e4,e.prototype.talkProfileHref=p,e.prototype.events={'click button[name="sign-in"]':"onClickSignIn",'click button[name="sign-up"]':"onClickSignUp",'click button[name="sign-out"]':"onClickSignOut"},e.prototype.elements={".current-user-name":"currentUserName",'button[name="groups"]':"groupsMenuButton",'button[name="languages"]':"languagesMenuButton",".message-count":"messageCount",".avatar img":"avatarImage",".group":"currentGroup"},e.prototype.onClickSignIn=function(){return h.hide(),c.show()},e.prototype.onClickSignUp=function(){return c.hide(),h.show()},e.prototype.onClickSignOut=function(){return u.logout()},e.prototype.onUserChange=function(t,e){var n;return this.el.toggleClass("signed-in",null!=e),this.el.toggleClass("has-groups",(null!=e&&null!=(n=e.user_groups)?n.length:void 0)>0),this.onUserChangeGroup(t,null!=e,null!=e?e.user_group_id:void 0),this.getMessages(),this.currentUserName.html((null!=e?e.name:void 0)||""),this.avatarImage.attr({src:null!=e?e.avatar:void 0})},e.prototype.getMessages=function(){var t=this;return null!=u.current?n.current.get("/talk/messages/count",function(e){return t.el.toggleClass("has-messages",0!==e),t.messageCount.html(e),setTimeout(t.getMessages,t.messageCheckTimeout)}):(this.el.removeClass("has-messages"),this.messageCount.html("0"))},e.prototype.onUserChangeGroup=function(t,e,n){return this.el.toggleClass("group-participant",null!=n)},e}(o),window.zooniverse.controllers.TopBar=l,"undefined"!=typeof e&&null!==e&&(e.exports=l)}).call(this)},{"../lib/api":28,"../lib/language-manager":30,"../models/user":38,"../views/top-bar":58,"./base-controller":16,"./dropdown":18,"./groups-menu":19,"./languages-menu":20,"./login-dialog":21,"./signup-dialog":25}],28:[function(t,e){(function(){var n,o,r,i,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l=[].slice;null==window.zooniverse&&(window.zooniverse={}),r=window.zooniverse.EventEmitter||t("./event-emitter"),i=window.zooniverse.ProxyFrame||t("./proxy-frame"),n=window.jQuery,o=function(t){function e(t){var n,o,r,s,a=this;s=null!=t?t:{},this.project=s.project,n=s.host,r=s.path,o=s.loadTimeout,e.__super__.constructor.apply(this,arguments),this.proxyFrame=new i({host:n,path:r,loadTimeout:o}),this.proxyFrame.on("ready",function(){return a.trigger("ready")}),this.proxyFrame.on("fail",function(){return a.trigger("fail")}),this.select()}return a(e,t),e.current=null,e.prototype.project=".",e.prototype.headers={},e.prototype.proxyFrame=null,e.prototype.request=function(t,e,n,o,r){var i;return"function"==typeof n&&(i=[o,n,null],r=i[0],o=i[1],n=i[2],this.trigger("request",[t,e,n])),this.proxyFrame.send({type:t,url:e,data:n,headers:this.headers},o,r)},e.prototype.get=function(){return window.req=this.request.apply(this,["get"].concat(l.call(arguments)))},e.prototype.getJSON=function(){return this.request.apply(this,["getJSON"].concat(l.call(arguments)))},e.prototype.post=function(){return this.request.apply(this,["post"].concat(l.call(arguments)))},e.prototype.put=function(){return this.request.apply(this,["put"].concat(l.call(arguments)))},e.prototype["delete"]=function(){return this.request.apply(this,["delete"].concat(l.call(arguments)))},e.prototype.select=function(){return this.trigger("select"),this.constructor.current=this},e.prototype.destroy=function(){return this.proxyFrame.destroy(),e.__super__.destroy.apply(this,arguments)},e}(r),window.zooniverse.Api=o,"undefined"!=typeof e&&null!==e&&(e.exports=o)}).call(this)},{"./event-emitter":29,"./proxy-frame":31}],29:[function(t,e){(function(){var t,n,o,r={}.hasOwnProperty;null==window.zooniverse&&(window.zooniverse={}),t=window.jQuery,o=!!~location.href.indexOf("log=1"),n=function(){function e(){}var n,i;e.on=function(e,n){return null==this.jQueryEventProxy&&(this.jQueryEventProxy=t({})),this.jQueryEventProxy.on(e,n)},e.one=function(e,n){return null==this.jQueryEventProxy&&(this.jQueryEventProxy=t({})),this.jQueryEventProxy.one(e,n)},e.off=function(e,n){return null==this.jQueryEventProxy&&(this.jQueryEventProxy=t({})),this.jQueryEventProxy.off(e,n)},e.trigger=function(e,n){var r,i;return null==n&&(n=[]),o&&"undefined"!=typeof console&&null!==console&&console.info(this.name||this.toString(),e.toUpperCase(),n),null==this.jQueryEventProxy&&(this.jQueryEventProxy=t({})),(i=this.jQueryEventProxy).trigger.apply(i,arguments),"function"==typeof(r=this.constructor).trigger?r.trigger(e,[this].concat(n)):void 0};for(i in e)r.call(e,i)&&(n=e[i],e.prototype[i]=n);return e.prototype.destroy=function(){return this.trigger("destroying"),this.off()},o&&(e.prototype.toString=function(){return""+this.constructor.name+" instance"}),e}(),window.zooniverse.EventEmitter=n,"undefined"!=typeof e&&null!==e&&(e.exports=n)}).call(this)},{}],30:[function(t,e){(function(){var n,o,r,i,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};o=(null!=(i=window.zooniverse)?i.EventEmitter:void 0)||t("./event-emitter"),n=window.jQuery,r=function(t){function e(t){var e,n,o,r,i,s,a,u,p=this;if(r=null!=t?t:{},this.translations=r.translations,this.code=r.code,null==this.translations&&(this.translations={}),null!=window.AVAILABLE_TRANSLATIONS){i=window.AVAILABLE_TRANSLATIONS;for(code in i)e=i[code],this.translations[code]=e}null==this.code&&(this.code=null!=(s=location.search.match(/lang=([^&]+)/))?s[1]:void 0),null==this.code&&(this.code=localStorage.getItem("zooniverse-language-code")),null==this.code&&(this.code=null!=(a=navigator.language)?a.split("-")[0]:void 0),null==this.code&&(this.code=null!=(u=navigator.userLanguage)?u.split("-")[0]:void 0),null==this.code&&(this.code=this.constructor.prototype.code),(l.call(this.code,"/")>=0||l.call(this.code,".json")>=0)&&null==(n=this.translations)[o=this.code]&&(n[o]={label:this.code,strings:this.code}),this.constructor.current=this,setTimeout(function(){return p.setLanguage(p.code)})}return a(e,t),e.current=null,e.prototype.translations=null,e.prototype.code="en",e.prototype.setLanguage=function(t,e,o){var r,i,s,a,l,u=this;return this.code=t,"string"==typeof(null!=(a=this.translations[this.code])?a.strings:void 0)?(i=null!=(l=this.translations[this.code])?l.strings:void 0,r=JSON.parse(localStorage.getItem("zooniverse-language-strings-"+this.code)),null!=r&&(this.translations[this.code].strings=r,this.setLanguage(this.code,e,o)),s=n.getJSON(i),s.done(function(t){return localStorage.setItem("zooniverse-language-strings-"+u.code,JSON.stringify(t)),u.translations[u.code].strings=t,u.setLanguage(u.code,e,o)}),s.fail(function(){return u.trigger("language-fetch-fail"),"function"==typeof o?o.apply(null,arguments):void 0})):(localStorage.setItem("zooniverse-language-code",this.code),this.trigger("change-language",[this.code,this.translations[this.code].strings]),"function"==typeof e?e(this.code,this.translations[this.code].strings):void 0)},e}(o),null==window.zooniverse&&(window.zooniverse={}),window.zooniverse.LanguageManager=r,"undefined"!=typeof e&&null!==e&&(e.exports=r)}).call(this)},{"./event-emitter":29}],31:[function(t,e){(function(){var n,o,r,i,s,a,l,u,p,c,h=function(t,e){return function(){return t.apply(e,arguments)}},d={}.hasOwnProperty,f=function(t,e){function n(){this.constructor=t}for(var o in e)d.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};null==window.zooniverse&&(window.zooniverse={}),o=window.zooniverse.EventEmitter||t("./event-emitter"),n=window.jQuery,u=n(document.body.parentNode),p=-1,s=!!~location.hostname.indexOf("demo"),i=!!~location.pathname.indexOf("beta"),l=+location.port>=1024,a=null!=(c=location.search.match(/api=([^&]+)/))?c[1]:void 0,null==a||~a.indexOf("//")||(a="//"+a),r=function(t){function e(t){var o,r,i=this;null==t&&(t={}),this.timeout=h(this.timeout,this),e.__super__.constructor.apply(this,arguments);for(o in t)d.call(t,o)&&(r=t[o],o in this&&null!=r&&(this[o]=r));null==this.deferreds&&(this.deferreds={}),null==this.queue&&(this.queue=[]),n(window).on("message",function(t){var e;return e=t.originalEvent,e.source===i.el.get(0).contentWindow?i.onMessage.apply(i,arguments):void 0}),this.connect()}return f(e,t),e.REJECTION="ProxyFrame not connected",e.prototype.host=a||"https://"+(s||i||l?"dev":"api")+".zooniverse.org",e.prototype.path="/proxy",e.prototype.loadTimeout=5e3,e.prototype.retryTimeout=12e4,e.prototype.el=null,e.prototype.className="proxy-frame",e.prototype.attempt=0,e.prototype.ready=!1,e.prototype.failed=!1,e.prototype.deferreds=null,e.prototype.queue=null,e.prototype.connect=function(){var t,e,o=this;return t=this.attempt<0?"_BAD":"",this.attempt+=1,null!=(e=this.el)&&e.remove(),this.el=n("<iframe src='"+this.host+this.path+t+"' class='"+this.className+"' data-attempt='"+this.attempt+"' style='display: none;'></iframe>"),this.el.appendTo(document.body),setTimeout(function(){return o.ready?void 0:o.timeout()},this.loadTimeout)},e.prototype.onReady=function(){var t=this;return this.attempt=0,this.ready=!0,this.failed=!1,setTimeout(function(){var e,n,o,r,i;for(r=t.queue,i=[],n=0,o=r.length;o>n;n++)e=r[n],i.push(t.process(e));return i},100),u.removeClass("offline"),this.trigger("ready")},e.prototype.timeout=function(){return this.trigger("timeout",this.loadTimeout),this.onFailed()},e.prototype.onFailed=function(){var t,e,n,o,r=this;if(!this.ready){for(this.failed=!0,o=this.queue,e=0,n=o.length;n>e;e++)t=o[e],this.deferreds[t.id].reject(this.constructor.REJECTION);return this.queue.splice(0),u.addClass("offline"),this.trigger("fail"),setTimeout(function(){return r.connect()},this.retryTimeout)}},e.prototype.send=function(t,e,o){var r,i=this;return p+=1,t.id=p,r=new n.Deferred,r.then(e,o),function(t,e){return e.always(function(){return delete i.deferreds[t]})}(p,r),this.deferreds[p]=r,this.failed?r.reject(this.constructor.REJECTION):this.ready?this.process(t):this.queue.push(t),r.promise()},e.prototype.process=function(t){return this.el.get(0).contentWindow.postMessage(JSON.stringify(t),this.host)},e.prototype.onMessage=function(t){var e,n;return e=t.originalEvent,n=JSON.parse(e.data),"READY"===n.id?this.onReady():(n.failure?this.deferreds[n.id].reject(n.response):this.deferreds[n.id].resolve(n.response),this.trigger("response",[n]))},e.prototype.destroy=function(){return this.el.remove(),e.__super__.destroy.apply(this,arguments)},e}(o),window.zooniverse.ProxyFrame=r,"undefined"!=typeof e&&null!==e&&(e.exports=r)}).call(this)},{"./event-emitter":29}],32:[function(t,e){(function(){var n,o,r,i,s,a,l,u,p,c,h,d,f,g=[].slice;n=(null!=(r=window.zooniverse)?r.LanguageManager:void 0)||t("./language-manager"),o=function(){var t,e,n,r,i;return r=2<=arguments.length?g.call(arguments,0,i=arguments.length-1):(i=0,[]),e=arguments[i++],n=r[0],null==n&&(n="span"),t=document.createElement(n),t.setAttribute(o.attr,e),o.refresh(t),t.outerHTML},o.attr="data-zooniverse-translate",o.strings={en:(null!=(i=window.zooniverse)&&null!=(a=i.translations)?a.en:void 0)||t("../translations/en"),es:(null!=(l=window.zooniverse)&&null!=(u=l.translations)?u.es:void 0)||t("../translations/es"),fr:(null!=(p=window.zooniverse)&&null!=(c=p.translations)?c.fr:void 0)||t("../translations/fr"),pl:(null!=(h=window.zooniverse)&&null!=(d=h.translations)?d.pl:void 0)||t("../translations/pl"),zh_tw:(null!=(f=window.zooniverse)&&null!=(s=f.translations)?s.zh_tw:void 0)||t("../translations/zh-tw")},o.refresh=function(t){var e,r,i,s,a,l,u,p,c,h,d,f;for(u=t.attributes,f=[],a=0,l=u.length;l>a;a++)p=u[a],e=p.name,s=p.value,e.slice(0,o.attr.length)===o.attr&&s&&(r=e.slice(o.attr.length+1)||"innerHTML",i=null!=(c=o.strings[null!=(h=n.current)?h.code:void 0])?c[s]:void 0,i||(i=null!=(d=o.strings[n.prototype.code])?d[s]:void 0),i||(i=s),f.push(t.hasAttribute(r)?t.setAttribute(r,i):t[r]=i));return f},n.on("change-language",function(){var t,e,n,r,i;for(r=document.querySelectorAll("["+o.attr+"]"),i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(o.refresh(t));return i}),null==window.zooniverse&&(window.zooniverse={}),window.zooniverse.translate=o,"undefined"!=typeof e&&null!==e&&(e.exports=o)}).call(this)},{"../translations/en":39,"../translations/es":40,"../translations/fr":41,"../translations/pl":42,"../translations/zh-tw":43,"./language-manager":30}],33:[function(t,e){(function(){var n,o,r,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};null==window.zooniverse&&(window.zooniverse={}),null==(r=window.zooniverse).models&&(r.models={}),o=window.zooniverse.EventEmitter||t("../lib/event-emitter"),n=function(t){function e(t){var n,o,r;null==t&&(t={}),e.__super__.constructor.apply(this,arguments);for(n in t)i.call(t,n)&&(o=t[n],n in this&&(this[n]=o));this.constructor.idCounter+=1,null==this.id&&(this.id="C_"+this.constructor.idCounter),null==(r=this.constructor).instances&&(r.instances=[]),this.constructor.instances.push(this)}return s(e,t),e.idCounter=-1,e.instances=null,e.count=function(){return null==this.instances&&(this.instances=[]),this.instances.length},e.first=function(){return null==this.instances&&(this.instances=[]),this.instances[0]},e.find=function(t){var e,n,o,r;for(null==this.instances&&(this.instances=[]),r=this.instances,n=0,o=r.length;o>n;n++)if(e=r[n],e.id===t)return e},e.search=function(t){var e,n,o,r,s,a,l,u;for(null==this.instances&&(this.instances=[]),l=this.instances,u=[],s=0,a=l.length;a>s;s++){e=l[s],n=!1;for(o in t)if(i.call(t,o)&&(r=t[o],e[o]!==r)){n=!0;break}n||u.push(e)}return u},e.destroyAll=function(){var t;for(t=[];0!==this.count();)t.push(this.first().destroy());return t},e.prototype.id=null,e.prototype.destroy=function(){var t,n,o,r,i,s,a;for(e.__super__.destroy.apply(this,arguments),i=this.constructor.instances,a=[],t=o=0,r=i.length;r>o;t=++o)if(n=i[t],n===this){null!=(s=this.constructor.instances)&&s.splice(t,1);break}return a},e}(o),window.zooniverse.models.BaseModel=n,"undefined"!=typeof e&&null!==e&&(e.exports=n)}).call(this)},{"../lib/event-emitter":29}],34:[function(t,e){(function(){var n,o,r,i,s,a,l,u,p,c,h,d,f,g,v,m,y,w={}.hasOwnProperty,_=function(t,e){function n(){this.constructor=t}for(var o in e)w.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},k=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},b=[].slice;r=(null!=(c=window.zooniverse)&&null!=(h=c.models)?h.BaseModel:void 0)||t("./base-model"),o=(null!=(d=window.zooniverse)?d.Api:void 0)||t("../lib/api"),u=(null!=(f=window.zooniverse)&&null!=(g=f.models)?g.Recent:void 0)||t("../models/recent"),s=(null!=(v=window.zooniverse)&&null!=(m=v.models)?m.Favorite:void 0)||t("../models/favorite"),a=(null!=(y=window.zooniverse)?y.LanguageManager:void 0)||t("../lib/language-manager"),n=window.jQuery,l=(new n.Deferred).resolve().state(),i=function(t){function e(){e.__super__.constructor.apply(this,arguments),null==this.annotations&&(this.annotations=[]),this.generic={},this.started_at=(new Date).toUTCString(),this.user_agent=window.navigator.userAgent}return _(e,t),e.pending=JSON.parse(localStorage.getItem("pending-classifications"))||[],e.sentThisSession=0,e.sendPending=function(){var t,e,r,i,a,u,p=this;if(0!==this.pending.length){for(this.trigger("sending-pending",[t]),e=[],a=this.pending,u=[],r=0,i=a.length;i>r;r++)t=a[r],u.push(function(t){var r;return r=o.current.post(t.url,t),e.push(r),r.done(function(){var e,n;return p.trigger("send-pending",[t]),t.favorite?(e=new s({subjects:function(){var e,o,r,i;for(r=t.subject_ids,i=[],e=0,o=r.length;o>e;e++)n=r[e],i.push({id:n});return i}()}),e.send()):void 0}),r.fail(function(){return p.trigger("send-pending-fail",[t])}),n.when.apply(n,e).always(function(){var t,n,o;for(t=n=o=e.length-1;0>=o?0>=n:n>=0;t=0>=o?++n:--n)e[t].state()===l&&p.pending.splice(t,1);return localStorage.setItem("pending-classifications",JSON.stringify(p.pending))})}(t));return u}},e.prototype.subjects=[],e.prototype.subject=null,e.prototype.annotations=null,e.prototype.favorite=!1,e.prototype.generic=null,e.prototype.started_at=null,e.prototype.finished_at=null,e.prototype.user_agent=null,e.prototype.normalizeSubjects=function(){return this.subjects.length>0?this.subject||(this.subject=this.subjects[0]):this.subjects=[this.subject]},e.prototype.annotate=function(t){return this.annotations.push(t),t},e.prototype.removeAnnotation=function(t){var e,n,o,r,i;for(i=this.annotations,n=o=0,r=i.length;r>o;n=++o)if(e=i[n],e===t)return this.annotations.splice(n,1)},e.prototype.isTutorial=function(){var t;return this.normalizeSubjects(),k.call(function(){var e,n,o,r,i;for(o=this.subjects,i=[],e=0,n=o.length;n>e;e++)t=o[e],i.push(null!=(r=t.metadata)?r.tutorial:void 0);return i}.call(this),!0)>=0},e.prototype.set=function(t,e){return this.generic[t]=e,this.trigger("change",[t,e])},e.prototype.get=function(t){return this.generic[t]},e.prototype.toJSON=function(){var t,e,n,o,r,i,s,l,u;n=null!=(l=a.current)?l.code:void 0,this.normalizeSubjects(),i=function(){var t,e,n,o;for(n=this.subjects,o=[],t=0,e=n.length;e>t;t++)r=n[t],o.push(r.id);return o}.call(this),o={classification:{subject_ids:i,annotations:this.annotations.concat([{started_at:this.started_at,finished_at:this.finished_at},{user_agent:this.user_agent},{lang:n}])}},u=this.generic;for(e in u)s=u[e],t={},t[e]=s,o.classification.annotations.push(t);return this.favorite&&(o.classification.favorite=!0),o},e.prototype.url=function(){return this.normalizeSubjects(),"/projects/"+o.current.project+"/workflows/"+this.subjects[0].workflow_ids[0]+"/classifications"},e.prototype.send=function(){var t,e,n=this;return this.isTutorial()||(this.constructor.sentThisSession+=1),this.finished_at=(new Date).toUTCString(),t=(e=o.current).post.apply(e,[this.url(),this.toJSON()].concat(b.call(arguments))),t.done(function(){return n.makeRecent(),n.constructor.sendPending()}),t.fail(function(){return n.makePending()}),this.trigger("send")},e.prototype.makePending=function(){var t;return t=this.toJSON(),t.url=this.url(),this.constructor.pending.push(t),localStorage.setItem("pending-classifications",JSON.stringify(this.constructor.pending)),this.trigger("pending")},e.prototype.makeRecent=function(){var t,e,n,o,r,i,a;for(this.normalizeSubjects(),i=this.subjects,a=[],o=0,r=i.length;r>o;o++)n=i[o],e=new u({subjects:[n]}),e.trigger("from-classification"),this.favorite?(t=new s({subjects:[n]}),a.push(t.trigger("from-classification"))):a.push(void 0);return a},e}(r),null==window.zooniverse&&(window.zooniverse={}),null==(p=window.zooniverse).models&&(p.models={}),window.zooniverse.models.Classification=i,"undefined"!=typeof e&&null!==e&&(e.exports=i)}).call(this)},{"../lib/api":28,"../lib/language-manager":30,"../models/favorite":35,"../models/recent":36,"./base-model":33}],35:[function(t,e){(function(){var n,o,r,i,s,a,l,u=function(t,e){return function(){return t.apply(e,arguments)}},p={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var o in e)p.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};null==window.zooniverse&&(window.zooniverse={}),null==(a=window.zooniverse).models&&(a.models={}),i=window.zooniverse.models.Recent||t("./recent"),o=window.zooniverse.Api||t("../lib/api"),s=window.zooniverse.models.User||t("./user"),n=window.jQuery,r=function(t){function e(){return this.toJSON=u(this.toJSON,this),l=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.type="favorite",e.clearOnUserChange(),e.prototype.toJSON=function(){var t;return{favorite:{subject_ids:function(){var e,n,o,r;for(o=this.subjects,r=[],e=0,n=o.length;n>e;e++)t=o[e],r.push(t.id);return r}.call(this)}}},e.prototype.send=function(){var t=this;return this.trigger("sending"),o.current.post("/projects/"+o.current.project+"/favorites",this.toJSON(),function(e){return t.id=e.id,t.trigger("send")})},e.prototype["delete"]=function(){var t=this;return this.trigger("deleting"),o.current["delete"]("/projects/"+o.current.project+"/favorites/"+this.id,function(){return t.trigger("delete"),t.destroy()})},e}(i),window.zooniverse.models.Favorite=r,"undefined"!=typeof e&&null!==e&&(e.exports=r)}).call(this)},{"../lib/api":28,"./recent":36,"./user":38}],36:[function(t,e){(function(){var n,o,r,i,s,a,l,u,p,c={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var o in e)c.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};null==window.zooniverse&&(window.zooniverse={}),null==(u=window.zooniverse).models&&(u.models={}),r=window.zooniverse.models.BaseModel||t("./base-model"),o=window.zooniverse.Api||t("../lib/api"),l=window.zooniverse.models.User||t("./user"),s=window.zooniverse.models.Subject||t("./subject"),n=window.jQuery,a=function(t){function e(){return p=e.__super__.constructor.apply(this,arguments)
}return h(e,t),e}(s),i=function(t){function e(){var t,n,o,r,i,s,l,u;for(e.__super__.constructor.apply(this,arguments),null==this.subjects&&(this.subjects=[]),this.project_id||(this.project_id=null!=(i=this.subjects[0])?i.project_id:void 0),this.workflow_id||(this.workflow_id=null!=(s=this.subjects[0])&&null!=(l=s.workflow_ids)?l[0]:void 0),this.created_at||(this.created_at=(new Date).toUTCString()),u=this.subjects,t=o=0,r=u.length;r>o;t=++o)n=u[t],this.subjects[t]=new a(n)}return h(e,t),e.type="recent",e.path=function(){var t;return"/projects/"+o.current.project+"/users/"+(null!=(t=l.current)?t.id:void 0)+"/"+this.type+"s"},e.fetch=function(t,e,r){var i,s,a,l=this;return this.trigger("fetching"),"function"==typeof t&&(a=[t,e,{}],e=a[0],r=a[1],t=a[2]),t=n.extend({page:1,per_page:10},t),i=new n.Deferred,i.then(e,r),s=o.current.get(this.path(),t),s.done(function(t){var e,n;return e=function(){var e,o,r,i;for(r=t.reverse(),i=[],e=0,o=r.length;o>e;e++)n=r[e],i.push(new this(n));return i}.call(l),l.trigger("fetch",[e]),i.resolve(e)}),s.fail(function(){return l.trigger("fetch-fail"),i.reject.apply(i,arguments)}),i.promise()},e.clearOnUserChange=function(){var t;return t=this,l.on("change",function(){var e;for(e=[];0!==t.count();)e.push(t.first().destroy());return e})},e.clearOnUserChange(),e.prototype.subjects=null,e.prototype.project_id="",e.prototype.workflow_id="",e.prototype.created_at="",e}(r),window.zooniverse.models.Recent=i,"undefined"!=typeof e&&null!==e&&(e.exports=i)}).call(this)},{"../lib/api":28,"./base-model":33,"./subject":37,"./user":38}],37:[function(t,e){(function(){var n,o,r,i,s,a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};null==window.zooniverse&&(window.zooniverse={}),null==(s=window.zooniverse).models&&(s.models={}),r=zooniverse.models.BaseModel||t("./base-model"),o=zooniverse.Api||t("../lib/api"),n=window.jQuery,i=function(t){function e(){e.__super__.constructor.apply(this,arguments),null==this.location&&(this.location={}),null==this.coords&&(this.coords=[]),null==this.metadata&&(this.metadata={}),null==this.workflow_ids&&(this.workflow_ids=[])}return l(e,t),e.current=null,e.queueLength=5,e.group=!1,e.fallback="./offline/subjects.json",e.path=function(){var t;return t=this.group?this.group===!0?"groups/":"groups/"+this.group+"/":"","/projects/"+o.current.project+"/"+t+"subjects"},e.next=function(t,e){var o,r,i,s=this;return this.trigger("get-next"),null!=(i=this.current)&&i.destroy(),this.current=null,r=new n.Deferred,r.then(t,e),0===this.count()?(o=this.fetch(),o.done(function(){var t;return null!=(t=s.first())&&t.select(),s.current?r.resolve(s.current):(s.trigger("no-more"),r.reject.apply(r,arguments))}),o.fail(function(){return r.reject.apply(r,arguments)})):(this.first().select(),r.resolve(this.current),this.count()<this.queueLength&&this.fetch()),r.promise()},e.fetch=function(t,e,r){var i,s,a,l,u=this;return"function"==typeof t&&(l=[t,e,{}],e=l[0],r=l[1],t=l[2]),s=(t||{}).limit,null==s&&(s=this.queueLength-this.count()),i=new n.Deferred,i.then(e,r),s>0?(a=o.current.get(this.path(),{limit:s}),a.done(function(t){var e,n;return e=function(){var e,o,r;for(r=[],e=0,o=t.length;o>e;e++)n=t[e],r.push(new this(n));return r}.call(u),u.trigger("fetch",[e]),i.resolve(e)}),a.fail(function(){var t;return u.trigger("fetching-fallback"),t=n.get(u.fallback),t.done(function(t){var e,n,o,r,s;if(u.group){for(n=[],r=0,s=t.length;s>r;r++)o=t[r],o.group_id===u.group&&n.push(o);t=n}return t.sort(function(){return Math.random()-.5}),e=function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)o=t[e],r.push(new this(o));return r}.call(u),u.trigger("fetch",[e]),i.resolve(e)}),t.fail(function(){return u.trigger("fetch-fail"),i.fail.apply(i,arguments)})})):i.resolve(this.instances.slice(0,number)),i.promise()},e.prototype.id="",e.prototype.zooniverse_id="",e.prototype.classification_count=null,e.prototype.coords=null,e.prototype.location=null,e.prototype.metadata=null,e.prototype.project_id="",e.prototype.group_id="",e.prototype.workflow_ids=null,e.prototype.tutorial=null,e.prototype.preload=!0,e.prototype.preloadImages=function(){var t,e,n,o,r;if(this.preload){o=this.location,r=[];for(n in o)t=o[n],t instanceof Array||(t=[t]),this.isImage(t)&&r.push(function(){var n,o,r;for(r=[],n=0,o=t.length;o>n;n++)e=t[n],r.push((new Image).src=e);return r}());return r}},e.prototype.select=function(){return this.constructor.current=this,this.trigger("select")},e.prototype.destroy=function(){return this.constructor.current===this&&(this.constructor.current=null),e.__super__.destroy.apply(this,arguments)},e.prototype.isImage=function(t){var e,n,o,r;for(n=0,o=t.length;o>n;n++)if(e=t[n],"gif"!==(r=e.split(".").pop())&&"jpg"!==r&&"png"!==r)return!1;return!0},e.prototype.talkHref=function(){var t;return t=this.domain||location.hostname.replace(/^www\./,""),"http://talk."+t+"/#/subjects/"+this.zooniverse_id},e.prototype.socialImage=function(){var t;return t=this.location.standard instanceof Array?this.location.standard[Math.floor(this.location.standard.length/2)]:this.location.standard,n("<a href='"+t+"'></a>").get(0).href},e.prototype.socialTitle=function(){return"Zooniverse classification"},e.prototype.socialMessage=function(){return"Classifying on the Zooniverse!"},e.prototype.facebookHref=function(){return("https://www.facebook.com/sharer/sharer.php\n?s=100\n&p[url]="+encodeURIComponent(this.talkHref())+"\n&p[title]="+encodeURIComponent(this.socialTitle())+"\n&p[summary]="+encodeURIComponent(this.socialMessage())+"\n&p[images][0]="+this.socialMessage()).replace("\n","","g")},e.prototype.twitterHref=function(){var t;return t=""+this.socialMessage()+" "+this.talkHref(),"http://twitter.com/home?status="+encodeURIComponent(t)},e.prototype.pinterestHref=function(){return("http://pinterest.com/pin/create/button/\n?url="+encodeURIComponent(this.talkHref())+"\n&media="+encodeURIComponent(this.socialImage())+"\n&description="+encodeURIComponent(this.socialMessage())).replace("\n","","g")},e}(r),window.zooniverse.models.Subject=i,"undefined"!=typeof e&&null!==e&&(e.exports=i)}).call(this)},{"../lib/api":28,"./base-model":33}],38:[function(t,e){(function(){var n,o,r,i,s,a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u=[].slice;null==window.zooniverse&&(window.zooniverse={}),null==(s=window.zooniverse).models&&(s.models={}),o=window.zooniverse.EventEmitter||t("../lib/event-emitter"),n=window.zooniverse.Api||t("../lib/api"),i=window.base64||(t("../vendor/base64"),window.base64),r=function(t){function e(t){var e,n;null==t&&(t={});for(e in t)a.call(t,e)&&(n=t[e],this[e]=n)}return l(e,t),e.current=!1,e.path=function(){return n.current.project?"/projects/"+n.current.project:""},e.fetch=function(){var t,o;return e.trigger("fetching",arguments),t=(o=n.current).getJSON.apply(o,[""+e.path()+"/current_user"].concat(u.call(arguments))),t.always(e.onFetch),t},e.login=function(t){var e,o,r,i;return r=t.username,o=t.password,this.trigger("logging-in",arguments),e=(i=n.current).getJSON.apply(i,[""+this.path()+"/login"].concat(u.call(arguments))),e.done(this.onFetch),e.fail(this.onFail),e},e.logout=function(){var t,e;return this.trigger("logging-out",arguments),t=(e=n.current).getJSON.apply(e,[""+this.path()+"/logout"].concat(u.call(arguments))),t.always(this.onFetch),t},e.signup=function(t){var e,o,r,i,s;return i=t.username,o=t.password,e=t.email,this.trigger("signing-up"),r=(s=n.current).getJSON.apply(s,[""+this.path()+"/signup"].concat(u.call(arguments))),r.always(this.onFetch),r},e.onFetch=function(t){var o,r;return r=e.current,e.current=t.success&&"name"in t&&"api_key"in t?new e(t):null,e.current?(o=i.encode(""+e.current.name+":"+e.current.api_key),n.current.headers.Authorization="Basic "+o):delete n.current.headers.Authorization,e.current!==r&&(r&&r.destroy(),e.trigger("change",[e.current])),t.success?void 0:e.trigger("sign-in-error",t.message)},e.onFail=function(){return e.trigger("sign-in-failure")},e.prototype.id="",e.prototype.zooniverse_id="",e.prototype.api_key="",e.prototype.name="",e.prototype.avatar="",e.prototype.project=null,e.prototype.setGroup=function(t,o){var r,i,s,a=this;if(null!=e.current)return i=null!=t?"/user_groups/"+t+"/participate":"/user_groups/TODO_HOW_DO_I_LEAVE_A_GROUP/participate",r=null!=(s=n.current)?s.getJSON(i,function(t){return a.trigger("change-group",t),"function"==typeof o?o.apply(null,arguments):void 0}):void 0},e.prototype.setPreference=function(t,o,r,i){var s,a,l,u;return null==r&&(r=!1),null!=e.current?("function"==typeof r&&(u=[!1,r],r=u[0],i=u[1]),null==(s=e.current).preferences&&(s.preferences={}),r?e.current.preferences[t]=o:(null==(a=e.current.preferences)[l=n.current.project]&&(a[l]={}),e.current.preferences[n.current.project][t]=o),r||(t=""+n.current.project+"."+t),n.current.put("/users/preferences",{key:t,value:o},i)):void 0},e.prototype.deletePreference=function(t,o,r){var i,s,a,l;return null==o&&(o=!1),null!=e.current?("function"==typeof o&&(l=[!1,o],o=l[0],r=l[1]),null==(i=e.current).preferences&&(i.preferences={}),o?delete e.current.preferences[t]:(null==(s=e.current.preferences)[a=n.current.project]&&(s[a]={}),delete e.current.preferences[n.current.project][t]),o||(t=""+n.current.project+"."+t),n.current["delete"]("/users/preferences",{key:t},r)):void 0},e}.call(this,o),window.zooniverse.models.User=r,"undefined"!=typeof e&&null!==e&&(e.exports=r)}).call(this)},{"../lib/api":28,"../lib/event-emitter":29,"../vendor/base64":45}],39:[function(t,e){(function(){var t,n;t={topBarHeading:"A Zooniverse project",signUpHeading:"Sign up for a new Zooniverse account",signInHeading:"Sign in to your Zooniverse account",signUp:"Sign up",signIn:"Sign in",signOut:"Sign out",username:"Username",password:"Password",email:"Email",realName:"Real name",whyRealName:"This will be used when we thank contributors, for example, in talks or on posters. If you don't want to be mentioned publicly, leave this blank.",noAccount:"Don't have an account?",agreeToPrivacyPolicy:'I agree to the <a href="https://www.zooniverse.org/privacy" target="_blank">privacy policy</a>.',forgotPassword:"Forgot your password?",badLogin:"Incorrect username or password",signInFailed:"Sign in failed.",signInForProfile:"Sign in to see your profile.",footerHeading:"The Zooniverse is a collection of web-based citizen science projects that use the efforts of volunteers to help researchers deal with the flood of data that confronts them.",privacyPolicy:"Privacy policy",forkOnGitHub:"Source & bugs",recents:"Recents",favorites:"Favorites",none:"none"},null==window.zooniverse&&(window.zooniverse={}),null==(n=window.zooniverse).translations&&(n.translations={}),window.zooniverse.translations.en=t,"undefined"!=typeof e&&null!==e&&(e.exports=t)}).call(this)},{}],40:[function(t,e){(function(){var t,n;t={topBarHeading:"Un proyecto de la Zooniverse"},null==window.zooniverse&&(window.zooniverse={}),null==(n=window.zooniverse).translations&&(n.translations={}),window.zooniverse.translations.es=t,"undefined"!=typeof e&&null!==e&&(e.exports=t)}).call(this)},{}],41:[function(t,e){(function(){var t,n;t={topBarHeading:"Un projet Zooniverse",signUpHeading:"Crer un compte Zooniverse",signInHeading:"Connectez-vous  votre compte Zooniverse",signUp:"S'inscrire",signIn:"Connexion",signOut:"Dconnexion",username:"Nom d'utilisateur",password:"Mot de passe",email:"Email",realName:"Prnom Nom",whyRealName:"Votre nom pourra tre utiliser lors du remerciement des contributeurs, par exemple lors de prsentation orales ou sur des posters.<br />Si vous ne souhaitez pas qu'il soit mentionner publiquement, laissez cette case vide.",noAccount:"Vous n'avez pas encore de compte?",privacyPolicy:'J\'accepte les <a href="https://www.zooniverse.org/privacy" target="_blank">conditions d\'utilisation </a>.',forgotPassword:"Mot de passe oubli?",badLogin:"Utilisateur ou mot de passe incorrect",signInFailed:"chec de la connexion.",signInForProfile:"Connectez-vous pour accder  votre profil.",footerHeading:"Zooniverse est une collection de projets de science participative en ligne qui permettent aux volontaires d'aider les scientifiques  traiter les immenses quantits de donnes dont ils disposent.",privacyPolicy:"Contiditons d'utilisation",recents:"Rcents",favorites:"Favoris",none:"aucun"},null==window.zooniverse&&(window.zooniverse={}),null==(n=window.zooniverse).translations&&(n.translations={}),window.zooniverse.translations.fr=t,"undefined"!=typeof e&&null!==e&&(e.exports=t)}).call(this)},{}],42:[function(t,e){(function(){var t,n;t={topBarHeading:"Projekt Zooniverse",signUpHeading:"Utwrz nowe konto Zooniverse",signInHeading:"Zaloguj si na swoje konto Zooniverse",signUp:"Zarejestruj",signIn:"Zaloguj",signOut:"Wyloguj",username:"Nazwa uytkownika",password:"Haso",email:"Adres e-mail",realName:"Prawdziwe imi",whyRealName:"Korzystamy z tych danych, kiedy dzikujemy ochotnikom za ich wkad, na przykad podczas rozmw czy na plakatach. <br/> Jeeli nie chcesz, abymy wymieniali Ci publicznie z imienia i nazwiska, zostaw to pole puste.",noAccount:"Nie masz jeszcze konta?",privacyPolicy:'Zgadzam si z <a href="https://www.zooniverse.org/privacy" target="_blank">polityk prywatnoci</a>.',forgotPassword:"Nie pamitasz hasa?",badLogin:"Niepoprawna nazwa uytkownika lub haso",signInFailed:"Nie udao si zalogowa",signInForProfile:"Zaloguj si, aby zobaczy swj profil",footerHeading:"Zooniverse to zbir projektw nauki obywatelskiej w Internecie, dziki ktrym ochotnicy pomagaj badaczom przedziera si przez powd napywajcych danych.",privacyPolicy:"Polityka prywatnoci",recents:"Najnowsze",favorites:"Ulubione",none:"nic"},null==window.zooniverse&&(window.zooniverse={}),null==(n=window.zooniverse).translations&&(n.translations={}),window.zooniverse.translations.pl=t,"undefined"!=typeof e&&null!==e&&(e.exports=t)}).call(this)},{}],43:[function(t,e){(function(){var t,n;t={topBarHeading:"Zooniverse",signUpHeading:' "Zooniverse',signInHeading:"Zooniverse ",signUp:"",signIn:"",signOut:"",username:"",password:"",email:"",realName:"",whyRealName:"",noAccount:"",agreeToPrivacyPolicy:' <a href="https://www.zooniverse.org/privacy" target="_blank"> </a>.',betaPreference:"Zooniverse",forgotPassword:"?",badLogin:"",signInFailed:"",signInForProfile:"",footerHeading:" Zooniverse",privacyPolicy:"",forkOnGitHub:"",recents:"",favorites:"",none:""},null==window.zooniverse&&(window.zooniverse={}),null==(n=window.zooniverse).translations&&(n.translations={}),window.zooniverse.translations.zh_tw=t,"undefined"!=typeof e&&null!==e&&(e.exports=t)}).call(this)},{}],44:[function(t,e){(function(){var t,n,o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=function(t,e,n){var r,i;return r=t.className.split(/\s+/),i=o.call(r,e)>=0,null==n&&(n=!i),n=!!n,i||n!==!0||r.push(e),i&&n===!1&&r.splice(r.indexOf(e),1),t.className=r.join(" "),null},null==window.zooniverse&&(window.zooniverse={}),null==(n=window.zooniverse).util&&(n.util={}),window.zooniverse.util.toggleClass=t,"undefined"!=typeof e&&null!==e&&(e.exports=t)}).call(this)},{}],45:[function(){window.base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,n,o,r,i,s,a,l="",u=0;for(t=base64._utf8_encode(t);u<t.length;)e=t.charCodeAt(u++),n=t.charCodeAt(u++),o=t.charCodeAt(u++),r=e>>2,i=(3&e)<<4|n>>4,s=(15&n)<<2|o>>6,a=63&o,isNaN(n)?s=a=64:isNaN(o)&&(a=64),l=l+base64._keyStr.charAt(r)+base64._keyStr.charAt(i)+base64._keyStr.charAt(s)+base64._keyStr.charAt(a);return l},decode:function(t){var e,n,o,r,i,s,a,l="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)r=base64._keyStr.indexOf(t.charAt(u++)),i=base64._keyStr.indexOf(t.charAt(u++)),s=base64._keyStr.indexOf(t.charAt(u++)),a=base64._keyStr.indexOf(t.charAt(u++)),e=r<<2|i>>4,n=(15&i)<<4|s>>2,o=(3&s)<<6|a,l+=String.fromCharCode(e),64!=s&&(l+=String.fromCharCode(n)),64!=a&&(l+=String.fromCharCode(o));return l=base64._utf8_decode(l)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var o=t.charCodeAt(n);128>o?e+=String.fromCharCode(o):o>127&&2048>o?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},_utf8_decode:function(t){for(var e="",n=0,o=0,r=0,i=0;n<t.length;)o=t.charCodeAt(n),128>o?(e+=String.fromCharCode(o),n++):o>191&&224>o?(r=t.charCodeAt(n+1),e+=String.fromCharCode((31&o)<<6|63&r),n+=2):(r=t.charCodeAt(n+1),i=t.charCodeAt(n+2),e+=String.fromCharCode((15&o)<<12|(63&r)<<6|63&i),n+=3);return e}}},{}],46:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(t){t||(t={});var e,n=[],o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="underlay">\n  <div class="container">\n    <div class="dialog"></div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,n.join("")},window.zooniverse.views.dialog=template,"undefined"!=typeof e&&(e.exports=template)},{}],47:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(t){t||(t={});var e,n=[],o=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?i(t):""},r=t.safe,i=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.className||"zooniverse-group-icon",n.push('\n\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 200 100" class="'),n.push(o(t)),n.push('" width="2em" height="1em">\n  '),null==document.getElementById("zooniverse-groups-icon-person")&&n.push('\n    <defs>\n      <path id="zooniverse-groups-icon-person" d="M 0 -50 A 25 35 0 0 1 20 10 A 67 67 0 0 1 50 45 L 0 50 L -50 45 A 67 67 0 0 1 -20 10 A 25 35 0 0 1 0 -50 Z" />\n    </defs>\n  '),n.push('\n\n  <g class="'),n.push(o(t)),n.push('" fill="currentColor" stroke="transparent" stroke-width="0" transform="translate(100, 50)">\n    <use xlink:href="#zooniverse-groups-icon-person" transform="scale(0.67) translate(-80, 0)" opacity="0.75" />\n    <use xlink:href="#zooniverse-groups-icon-person" transform="scale(0.67) translate(80, 0)" opacity="0.75" />\n    <use xlink:href="#zooniverse-groups-icon-person" />\n  </g>\n</svg>\n')}).call(this)}.call(t),t.safe=r,t.escape=i,n.join("")},window.zooniverse.views.groupIconSvg=template,"undefined"!=typeof e&&(e.exports=template)},{}],48:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(t){t||(t={});var e,n=[],o=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?i(t):""},r=t.safe,i=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,r,i,s,a;for(n.push('<div class="user-groups">\n  '),s=this.user_groups||[],r=0,i=s.length;i>r;r++)a=s[r],t=a.id,e=a.name,n.push('\n    <div class="user-group">\n      <button name="user-group" value="'),n.push(o(t)),n.push('" '),t===this.user_group_id&&n.push('class="active"'),n.push(">"),n.push(o(e)),n.push("</button>\n    </div>\n  ");n.push("\n</div>\n")}).call(this)}.call(t),t.safe=r,t.escape=i,n.join("")},window.zooniverse.views.groupsMenu=template,"undefined"!=typeof e&&(e.exports=template)},{}],49:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(t){t||(t={});var e,n=[],o=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?i(t):""},r=t.safe,i=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.className||"zooniverse-language-icon",n.push('\n\n<svg viewBox="0 0 100 100" class="'),n.push(o(t)),n.push('" width="1.25em" height="1.25em">\n  <!--TODO: This icon is still not so great.-->\n  <g transform="translate(50, 50)" fill="transparent" stroke="currentColor" stroke-width="8">\n    <path d="M -43 0 H 43 M 0 -43 V 43"></path>\n    <path d="M 0 -45 Q -45 0 0 45 M 0 -45 Q 45 0 0 45"></path>\n    <path d="M -40 -25 Q 0 -15 40 -25 M -40 25 Q 0 15 40 25"></path>\n    <circle r="45"></circle>\n  </g>\n</svg>\n')}).call(this)}.call(t),t.safe=r,t.escape=i,n.join("")},window.zooniverse.views.languageIconSvg=template,"undefined"!=typeof e&&(e.exports=template)},{}],50:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(e){e||(e={});var n,o=[],r=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},i=e.safe,s=e.escape;return n=e.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=e.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,i,s,a,l;e=window.zooniverse.LanguageManager||t("../lib/language-manager"),o.push('\n\n<div class="languages">\n  '),a=null!=(s=e.current)?s.translations:void 0;for(n in a)i=a[n].label,o.push('\n    <div class="language">\n      <button name="language" value="'),o.push(r(n)),o.push('" '),n===(null!=(l=e.current)?l.code:void 0)&&o.push('class="active"'),o.push(">"),o.push(r(i)),o.push("</button>\n    </div>\n  ");o.push("\n</div>\n")}).call(this)}.call(e),e.safe=i,e.escape=s,o.join("")},window.zooniverse.views.languagesMenu=template,"undefined"!=typeof e&&(e.exports=template)},{"../lib/language-manager":30}],51:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(e){e||(e={});var n,o=[],r=e.safe,i=e.escape;return n=e.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=e.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,r;e=("undefined"!=typeof zooniverse&&null!==zooniverse?zooniverse.translate:void 0)||t("../lib/translate"),o.push("\n"),n=("undefined"!=typeof zooniverse&&null!==zooniverse&&null!=(r=zooniverse.views)?r.zooniverseLogoSvg:void 0)||t("./zooniverse-logo-svg"),o.push('\n\n<div class="loader"></div>\n\n<button type="button" name="close-dialog">&times;</button>\n\n<header>\n  '),o.push(n()),o.push("\n  "),o.push(e("signInHeading")),o.push('\n</header>\n\n<label>\n  <span class="text-label">'),o.push(e("username")),o.push('</span><br />\n  <input type="text" name="username" required="required" />\n</label>\n\n<label>\n  <span class="text-label">'),o.push(e("password")),o.push('</span><br />\n  <input type="password" name="password" required="required" />\n</label>\n\n<div class="error-message"></div>\n\n<div class="action">\n  <a href="https://www.zooniverse.org/password/reset">'),o.push(e("forgotPassword")),o.push('</a>\n  <button type="submit">'),o.push(e("signIn")),o.push("</button>\n</div>\n")}).call(this)}.call(e),e.safe=r,e.escape=i,o.join("")},window.zooniverse.views.loginDialog=template,"undefined"!=typeof e&&(e.exports=template)},{"../lib/translate":32,"./zooniverse-logo-svg":59}],52:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(e){e||(e={});var n,o=[],r=e.safe,i=e.escape;return n=e.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=e.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n;e=(null!=(n=window.zooniverse)?n.translate:void 0)||t("../lib/translate"),o.push('\n<input type="text" name="username" required="required" data-zooniverse-translate="" data-zooniverse-translate-placeholder="username" />\n<input type="password" name="password" required="required" data-zooniverse-translate="" data-zooniverse-translate-placeholder="password" />\n<button type="submit">'),o.push(e("signIn")),o.push('</button>\n<button name="sign-out">'),o.push(e("signOut")),o.push('</button>\n<div class="error-message"></div>\n')}).call(this)}.call(e),e.safe=r,e.escape=i,o.join("")},window.zooniverse.views.loginForm=template,"undefined"!=typeof e&&(e.exports=template)},{"../lib/translate":32}],53:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(t){t||(t={});var e,n=[],o=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?i(t):""},r=t.safe,i=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.className||"zooniverse-mail-icon",n.push('\n\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 100" class="'),n.push(o(t)),n.push('" width="1.5em" height="1em">\n  <g class="'),n.push(o(t)),n.push('" fill="currentColor" stroke="transparent" stroke-width="0">\n    <path d="M 0 0 L 75 65 L 150 0 Z" />\n    <path d="M 0 0 L 75 75 L 150 0 L 150 100 L 0 100 Z" opacity="0.85" />\n  </g>\n</svg>\n')}).call(this)}.call(t),t.safe=r,t.escape=i,n.join("")},window.zooniverse.views.mailIconSvg=template,"undefined"!=typeof e&&(e.exports=template)},{}],54:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(t){t||(t={});var e,n=[],o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="loader"></div>\n\n<div class="items"></div>\n\n<nav class="controls">\n  <span class="numbered"></span>\n</nav>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,n.join("")},window.zooniverse.views.paginator=template,"undefined"!=typeof e&&(e.exports=template)},{}],55:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(e){e||(e={});var n,o=[],r=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},i=e.safe,s=e.escape;return n=e.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=e.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,i,s,a,l,u;e=(null!=(s=window.zooniverse)&&null!=(a=s.models)?a.Favorite:void 0)||t("zooniverse/models/favorite"),o.push("\n\n<div class='item'>\n  <a href=\""),o.push(r((null!=(l=this.subjects[0])?l.talkHref():void 0)||"#/SUBJECT_ERROR")),o.push('">\n    '),n=null!=(u=this.subjects[0])?u.location:void 0,o.push("\n    "),i=null,o.push("\n    "),null==i&&(i=null!=n?n.thumb:void 0),o.push("\n    "),(null!=n?n.standard:void 0)instanceof Array&&null==i&&(i=null!=n?n.standard[0]:void 0),o.push("\n    "),null==i&&(i=null!=n?n.standard:void 0),o.push('\n    <img src="'),o.push(r(i||"")),o.push('" />\n  </a>\n</div>\n')}).call(this)}.call(e),e.safe=i,e.escape=s,o.join("")},window.zooniverse.views.profileItem=template,"undefined"!=typeof e&&(e.exports=template)},{"zooniverse/models/favorite":35}],56:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(e){e||(e={});var n,o=[],r=e.safe,i=e.escape;return n=e.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=e.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n;e=(null!=(n=window.zooniverse)?n.translate:void 0)||t("../lib/translate"),o.push('\n\n<form class="sign-in-form">\n  <div class="loader"></div>\n\n  <header>'),o.push(e("signInForProfile")),o.push('</header>\n  <label><input type="text" name="username" required="required" data-zooniverse-translate="" data-zooniverse-translate-placeholder="username" /></label>\n  <label><input type="password" name="password" required="required" data-zooniverse-translate="" data-zooniverse-translate-placeholder="password" /></label>\n  <div class="error-message"></div>\n  <div class="action"><button type="submit">'),o.push(e("signIn")),o.push('</button></div>\n  <p class="no-account">'),o.push(e("noAccount")),o.push(' <button name="sign-up">'),o.push(e("signUp")),o.push('</button></p>\n</form>\n\n<nav>\n  <button name="turn-page" value="recents">'),o.push(e("recents")),o.push('</button>\n  <button name="turn-page" value="favorites">'),o.push(e("favorites")),o.push('</button>\n</nav>\n\n<div class="recents page"></div>\n<div class="recents-empty empty-message">'),o.push(e("recents")),o.push(" ("),o.push(e("none")),o.push(')</div>\n\n<div class="favorites page"></div>\n<div class="favorites-empty empty-message">'),o.push(e("favorites")),o.push(" ("),o.push(e("none")),o.push(")</div>\n")}).call(this)}.call(e),e.safe=r,e.escape=i,o.join("")},window.zooniverse.views.profile=template,"undefined"!=typeof e&&(e.exports=template)},{"../lib/translate":32}],57:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(e){e||(e={});var n,o=[],r=e.safe,i=e.escape;return n=e.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=e.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,r;e=("undefined"!=typeof zooniverse&&null!==zooniverse?zooniverse.translate:void 0)||t("../lib/translate"),o.push("\n"),n=("undefined"!=typeof zooniverse&&null!==zooniverse&&null!=(r=zooniverse.views)?r.zooniverseLogoSvg:void 0)||t("./zooniverse-logo-svg"),o.push('\n\n<div class="loader"></div>\n\n<button type="button" name="close-dialog">&times;</button>\n\n<header>\n  '),o.push(n()),o.push("\n  "),o.push(e("signUpHeading")),o.push('\n</header>\n\n<label>\n  <span class="text-label">'),o.push(e("username")),o.push('</span><br />\n  <input type="text" name="username" required="required" />\n</label>\n\n<label>\n  <span class="text-label">'),o.push(e("password")),o.push('</span><br />\n  <input type="password" name="password" required="required" />\n</label>\n\n<label>\n  <span class="text-label">'),o.push(e("email")),o.push('</span><br />\n  <input type="email" name="email" required="required" />\n</label>\n\n<label>\n  <span class="text-label">'),o.push(e("realName")),o.push('</span><br />\n  <input type="text" name="real-name" />\n  <div class="explanation">'),o.push(e("whyRealName")),o.push('</div>\n</label>\n\n<label>\n  <span></span>\n  <input type="checkbox" required="required" />'),o.push(e("agreeToPrivacyPolicy")),o.push('\n</label>\n\n<div class="error-message"></div>\n\n<div class="action">\n  <button type="submit">'),o.push(e("signUp")),o.push("</button>\n</div>\n")
}).call(this)}.call(e),e.safe=r,e.escape=i,o.join("")},window.zooniverse.views.signupDialog=template,"undefined"!=typeof e&&(e.exports=template)},{"../lib/translate":32,"./zooniverse-logo-svg":59}],58:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(e){e||(e={});var n,o=[],r=e.safe,i=e.escape;return n=e.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=e.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,r,i,s,a,l,u,p,c,h,d,f,g;i=(null!=(a=window.zooniverse)?a.translate:void 0)||t("../lib/translate"),o.push("\n"),s=(null!=(l=window.zooniverse)&&null!=(u=l.views)?u.zooniverseLogoSvg:void 0)||t("./zooniverse-logo-svg"),o.push("\n"),e=(null!=(p=window.zooniverse)&&null!=(c=p.views)?c.groupIconSvg:void 0)||t("./group-icon-svg"),o.push("\n"),n=(null!=(h=window.zooniverse)&&null!=(d=h.views)?d.languageIconSvg:void 0)||t("./language-icon-svg"),o.push("\n"),r=(null!=(f=window.zooniverse)&&null!=(g=f.views)?g.mailIconSvg:void 0)||t("./mail-icon-svg"),o.push('\n\n<div class="corner">\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none">\n    <path d="M 0 0 L 100 0 L 100 100 Z" />\n  </svg>\n</div>\n\n<div class="no-user">\n  <div class="zooniverse-info piece">\n    '),o.push(s()),o.push("\n    "),o.push(i("topBarHeading")),o.push('\n  </div>\n\n  <div class="sign-in piece">\n    <button name="sign-up">'),o.push(i("signUp")),o.push('</button>\n    <span class="separator">|</span>\n    <button name="sign-in">'),o.push(i("signIn")),o.push('</button>\n  </div>\n</div>\n\n<div class="current-user">\n  <div class="user-info piece">\n    <div class="current-user-name">&mdash;</div>\n\n    <div class="sign-out">\n      <button name="sign-out">'),o.push(i("signOut")),o.push('</button>\n    </div>\n  </div>\n\n  <div class="groups piece">\n    <div class="groups-menu-toggle">\n      <button name="groups">'),o.push(e()),o.push('</button>\n    </div>\n  </div>\n\n  <div class="messages piece">\n    <a href="'),o.push(this.talkProfileHref),o.push('" class="message-link">\n      '),o.push(r()),o.push('\n      <span class="message-count">&mdash;</span>\n    </a>\n  </div>\n\n  <div class="avatar piece">\n    <a href="https://www.zooniverse.org/projects/current"><img src="" /></a>\n  </div>\n</div>\n\n<div class="languages piece">\n  <div class="languages-menu-toggle">\n    <button name="languages">'),o.push(n()),o.push("</button>\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=r,e.escape=i,o.join("")},window.zooniverse.views.topBar=template,"undefined"!=typeof e&&(e.exports=template)},{"../lib/translate":32,"./group-icon-svg":47,"./language-icon-svg":49,"./mail-icon-svg":53,"./zooniverse-logo-svg":59}],59:[function(t,e){window.zooniverse=window.zooniverse||{},window.zooniverse.views=window.zooniverse.views||{},template=function(t){t||(t={});var e,n=[],o=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?i(t):""},r=t.safe,i=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.className||"zooniverse-logo",n.push('\n\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="'),n.push(o(t)),n.push('" width="1em" height="1em">\n  <g class="'),n.push(o(t)),n.push('" fill="currentColor" stroke="transparent" stroke-width="0" transform="translate(50, 50)">\n    <path d="M 0 -45 A 45 45 0 0 1 0 45 A 45 45 0 0 1 0 -45 Z M 0 -30 A 30 30 0 0 0 0 30 A 30 30 0 0 0 0 -30 Z" />\n    <path d="M 0 -12.5 A 12.5 12.5 0 0 1 0 12.5 A 12.5 12.5 0 0 1 0 -12.5 Z" />\n    <path d="M 0 -75 L 5 0 L 0 75 L -5 0 Z" transform="rotate(50)" />\n  </g>\n</svg>\n')}).call(this)}.call(t),t.safe=r,t.escape=i,n.join("")},window.zooniverse.views.zooniverseLogoSvg=template,"undefined"!=typeof e&&(e.exports=template)},{}],60:[function(t,e){var n,o,r,i,s,a,l={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("zooniverse/controllers/base-controller"),a=t("zooniverse/models/user"),s=t("zooniverse/models/subject"),n=t("zooniverse/models/classification"),i=+location.port>1023,o=function(t){function e(){this.Subject=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e}(s),e.__super__.constructor.apply(this,arguments),this.Subject.group=this.subjectGroup,this.listenTo(a,"change",function(t){return function(e,n){return t.onUserChange(n)}}(this)),this.listenTo(this.Subject,"getting-next",function(t){return function(){return t.onSubjectGettingNext()}}(this)),this.listenTo(this.Subject,"select",function(t){return function(e,n){return t.onSubjectSelect(n)}}(this)),i&&(window.classifier=this)}return u(e,t),e.prototype.Subject=null,e.prototype.subjectGroup=s.prototype.subjectGroup,e.prototype.className="readymade-classifier",e.prototype.tutorial=null,e.prototype.listenTo=function(t,e,n){var o,r;return o="on"in t?"on":"addEventListener",r="off"in t?"off":"removeEventListener",t[o](e,n),this.on("destroy",function(){return t[r](e,n)})},e.prototype.onUserChange=function(t){var e,n;return e=null!=t&&null!=(n=t.project)?n.tutorial_done:void 0,null==this.tutorial||e?null==this.classification?this.Subject.next():void 0:this.startTutorial()},e.prototype.startTutorial=function(){return this.tutorial.start()},e.prototype.onSubjectGettingNext=function(){return this.el.addClass("readymade-loading"),this.classification=null},e.prototype.onSubjectSelect=function(t){return this.createClassification(t),this.loadSubject(t,function(t){return function(){return t.loadClassification(t.classification),t.el.removeClass("readymade-loading")}}(this))},e.prototype.createClassification=function(t){return this.classification=new n({subject:t})},e.prototype.loadSubject=function(){},e.prototype.loadClassification=function(){},e.prototype.finishSubject=function(){return this.sendClassification(),this.getNextSubject()},e.prototype.sendClassification=function(){return i&&"undefined"!=typeof console&&null!==console?console.log(JSON.stringify(this.classification)):void 0},e.prototype.getNextSubject=function(){return this.Subject.next()},e}(r),e.exports=o},{"zooniverse/controllers/base-controller":16,"zooniverse/models/classification":34,"zooniverse/models/subject":37,"zooniverse/models/user":38}],61:[function(t,e){var n,o,r,i,s,a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./classifier"),s=t("./subject-viewer"),r=t("zooniverse-decision-tree"),i=t("./tasks/drawing"),o=function(e){function o(){o.__super__.constructor.apply(this,arguments),this.subjectViewer=new s,this.subjectViewerContainer.append(this.subjectViewer.el),this.decisionTree=new r({taskTypes:{radio:t("./tasks/radio"),checkbox:t("./tasks/checkbox"),button:t("./tasks/button"),filter:t("./tasks/filter"),drawing:i},tasks:this.tasks,firstTask:this.firstTask||Object.keys(this.tasks)[0]}),this.listenTo(this.decisionTree.el,this.decisionTree.LOAD_TASK,function(t){return function(e){return t.subjectViewer.setTaskIndex(e.detail.index)}}(this)),this.listenTo(this.decisionTree.el,i.prototype.SELECT_TOOL,function(t){return function(e){var n,o,r;return r=e.detail,o=r.tool,n=r.choice,t.subjectViewer.setTool(o,n)}}(this)),this.listenTo(this.decisionTree.el,this.decisionTree.COMPLETE,function(t){return function(){return t.finishSubject()}}(this)),this.decisionTreeContainer.append(this.decisionTree.el)}return l(o,e),o.prototype.workflow="untitled_workflow",o.prototype.tasks=null,o.prototype.firstTask="",o.prototype.className=""+n.prototype.className+" readymade-classify-page",o.prototype.template=t("./templates/classify-page"),o.prototype.elements={".readymade-subject-viewer-container":"subjectViewerContainer",".readymade-decision-tree-container":"decisionTreeContainer"},o.prototype.loadSubject=function(t,e){return o.__super__.loadSubject.apply(this,arguments),this.subjectViewer.loadSubject(t,e)},o.prototype.loadClassification=function(t){return o.__super__.loadClassification.apply(this,arguments),this.subjectViewer.loadClassification(t),this.decisionTree.reset()},o.prototype.sendClassification=function(){var t,e,n,r;for(this.classification.set("workflow",this.workflow),r=this.composeAnnotations(),e=0,n=r.length;n>e;e++)t=r[e],this.classification.annotate(t);return o.__super__.sendClassification.apply(this,arguments)},o.prototype.composeAnnotations=function(){var t,e,n,o,r,i,s,a,l,u,p,c;for(t=[],e=this.decisionTree.getValues(),a=0,u=e.length;u>a;a++){o=e[a];for(n in o)i=o[n],t.push({key:n,value:i})}for(c=this.subjectViewer.markingSurface.tools,l=0,p=c.length;p>l;l++)r=c[l].mark,null==(s=t[r._taskIndex]).marks&&(s.marks=[]),t[r._taskIndex].marks.push(r);return t},o}(n),e.exports=o},{"./classifier":60,"./subject-viewer":68,"./tasks/button":69,"./tasks/checkbox":70,"./tasks/drawing":71,"./tasks/filter":72,"./tasks/radio":73,"./templates/classify-page":75,"zooniverse-decision-tree":14}],62:[function(t,e){var n,o,r,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("marking-surface/lib/tools/point"),r=t("marking-surface").SVG,o=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.coordsGroup=r.prototype.addShape.call(this,"g.readymade-coordinates-label"),this.coordsRect=this.coordsGroup.addShape("rect",{x:-5}),this.coordsLabel=this.coordsGroup.addShape("text")}return s(n,e),n.Controls=t("./tool-controls"),n.prototype.unit="",n.prototype.upp=0,n.prototype.precision=0,n.prototype.rescale=function(t){var e;return n.__super__.rescale.apply(this,arguments),this.coordsLabel.el.style.fontSize="",e=parseFloat(getComputedStyle(this.coordsLabel.el).fontSize),this.coordsLabel.el.style.fontSize=""+e/t+"px"},n.prototype.render=function(){var t,e,o,r,i;return n.__super__.render.apply(this,arguments),this.attr("data-show-coordinates",this.unit&&this.upp||null),r=(this.mark.x/this.upp).toFixed(this.precision)+this.unit,i=(this.mark.y/this.upp).toFixed(this.precision)+this.unit,this.coordsLabel.attr("textContent",""+r+", "+i),t=this.coordsLabel.el.getBBox(),this.coordsRect.attr({y:-t.height-5,width:t.width+5,height:t.height+10}),e=t.width/-2,o=t.height+parseFloat(this.disc.attr("r")||this.radius),this.coordsGroup.attr("transform","translate("+Math.floor(e)+", "+Math.floor(o)+")")},n}(n),e.exports=o},{"./tool-controls":63,"marking-surface":6,"marking-surface/lib/tools/point":8}],63:[function(t,e){var n,o,r,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("marking-surface").ToolControls,o=t("zooniverse-decision-tree").Task,r=function(e){function n(){this.detailTasks={},n.__super__.constructor.apply(this,arguments),this.addEvent("click",'button[name="readymade-destroy-drawing"]',[this.tool.mark,"destroy"]),this.addEvent("change",this.onChange),setTimeout(function(t){return function(){var e,n,o,r,i;if(null!=t.details){for(r=t.details,i=[],n=0,o=r.length;o>n;n++)e=r[n],i.push(t.addDetail(e));return i}}}(this))}return s(n,e),n.prototype.template=t("../templates/tool-controls")(),n.prototype.details=null,n.prototype.taskTypes={radio:t("../tasks/radio"),checkbox:t("../tasks/checkbox")},n.prototype.addDetail=function(t){var e;return e=this.el.querySelector("form"),t instanceof o||(t=new this.taskTypes[t.type](t)),this.detailTasks[t.key]=t,t.renderTemplate(),t.show(),e.appendChild(t.el)},n.prototype.onChange=function(){var t,e,n,o;n=this.detailTasks,o=[];for(t in n)e=n[t],o.push(this.tool.mark.set(t,e.getValue()));return o},n.prototype.render=function(){return setTimeout(function(t){return function(){var e,n,o,r;o=t.detailTasks,r=[];for(e in o)n=o[e],r.push(n.reset(t.tool.mark[e]));return r}}(this))},n}(n),e.exports=r},{"../tasks/checkbox":70,"../tasks/radio":73,"../templates/tool-controls":81,"marking-surface":6,"zooniverse-decision-tree":14}],64:[function(t,e){var n;n=function(t){return t.toLowerCase().replace(/\W+/g,"-")},e.exports=n},{}],65:[function(t,e){var n,o,r,i,s,a,l,u,p,c,h,d;n=t("zooniverse/lib/api"),u=t("zooniverse/controllers/top-bar"),s=t("./site-background"),a=t("./site-header"),l=t("stack-of-pages"),h=t("./templates/home-page"),c=t("./lib/dash"),o=t("./classify-page"),r=t("zooniverse/controllers/profile"),d=t("./templates/team-page"),p=t("zooniverse/models/user"),i=function(){function t(t){var e,n,i,u,f,g,v,m,y,w,_,k,b,z,S,C,x,T;null==t&&(t={});for(g in t)w=t[g],this[g]=w;if(this.background&&(this.siteBackground=new s({src:this.background}),this.siteBackground.el.appendTo(document.body)),this.id&&this.connect(this.id),this.header=new a({template:a.prototype.template(this)}),this.stack=new l,this.stack.el.className+=" readymade-main-stack",(this.summary||this.description)&&this.addPage("#/","Home",h(this)),this.classifyPages=[],null!=this.workflows)for(S=this.workflows,_=0,b=S.length;b>_;_++)C=S[_],i=C.key,u=C.label,v=C.subjectGroup,m=C.tasks,n=C.firstTask,console.log({subjectGroup:v}),null==u&&(u="Classify"),null==i&&(i=c(u).replace(/\-/g,"_")),f=new o({subjectGroup:v,workflow:i,tasks:m,firstTask:n}),this.addPage("#/"+c(u),u,f),this.classifyPages.push(f);else null!=this.tasks&&(f=new o({tasks:this.tasks,firstTask:this.firstTask}),this.addPage("#/classify","Classify",f),this.classifyPages.push(f));if(this.profile!==!1&&(this.profile=new r,this.addPage("#/profile","Profile",this.profile)),null!=this.pages)for(x=this.pages,k=0,z=x.length;z>k;k++){f=x[k];for(y in f)e=f[y],this.addPage("#/"+c(y),y,"<div>"+e+"</div>")}(this.organizations||this.scientists||this.developers)&&this.addPage("#/team","Team",d(this)),null!=this.parent&&this.header.el.appendTo(this.parent),null!=(T=this.parent)&&T.appendChild(this.stack.el),this.stack.onHashChange(),p.fetch()}return t.prototype.parent=document.body,t.prototype.background="",t.prototype.id="",t.prototype.producer="",t.prototype.title="",t.prototype.summary="",t.prototype.description="",t.prototype.about="",t.prototype.pages=null,t.prototype.workflows=null,t.prototype.tasks=null,t.prototype.firstTask="",t.prototype.organizations=null,t.prototype.scientists=null,t.prototype.developers=null,t.prototype.connect=function(t){return this.api=new n({project:t}),this.topBar=new u,this.topBar.el.appendTo(document.body)},t.prototype.addPage=function(t,e,n){return this.stack.add(t,n),this.header.addNavLink(t,e)},t}(),e.exports=i},{"./classify-page":61,"./lib/dash":64,"./site-background":66,"./site-header":67,"./templates/home-page":76,"./templates/team-page":80,"stack-of-pages":11,"zooniverse/controllers/profile":24,"zooniverse/controllers/top-bar":27,"zooniverse/lib/api":28,"zooniverse/models/user":38}],66:[function(t,e){var n,o,r={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("zooniverse/controllers/base-controller"),o=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.el.css("backgroundImage","url('"+this.src+"')")}return i(n,e),n.prototype.className="readymade-site-background",n.prototype.template=t("./templates/site-background"),n.prototype.src="",n}(n),e.exports=o},{"./templates/site-background":77,"zooniverse/controllers/base-controller":16}],67:[function(t,e){var n,o,r={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("zooniverse/controllers/base-controller"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.className="readymade-site-header",n.prototype.template=t("./templates/site-header"),n.prototype.elements={".readymade-site-links":"linksList"},n.prototype.addNavLink=function(t,e){return this.linksList.append("<a href='"+t+"' class='readymade-site-link'>"+e+"</a>\n")},n}(n),e.exports=o},{"./templates/site-header":78,"zooniverse/controllers/base-controller":16}],68:[function(t,e){var n,o,r,i,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l=function(t,e){return(t%e+ +e)%e};n=t("zooniverse/controllers/base-controller"),o=t("marking-surface"),i=function(t,e){var n;return n=new Image,n.onload=function(){return"function"==typeof e?e(n):void 0},n.src=t},r=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.createMarkingSurface()}return a(n,e),n.prototype.className="readymade-subject-viewer",n.prototype.template=t("./templates/subject-viewer"),n.prototype.currentFrame=0,n.prototype.advanceTimeout=0/0,n.prototype.taskIndex=-1,n.prototype.toolOptions=null,n.prototype.FROM_CURRENT_TASK="data-from-current-task",n.prototype.elements={".readymade-marking-surface-container":"markingSurfaceContainer",".readymade-frame-controls":"frameControls",'button[name="play-frames"]':"playButton",'button[name="pause-frames"]':"pauseButton",".readymade-frame-toggles-list":"togglesList"},n.prototype.createMarkingSurface=function(){return this.markingSurface=new o,this.frameGroup=this.markingSurface.addShape("g.frames"),this.frames=[],this.markingSurface.on("add-tool",function(t){return function(e){var n,o,r,i,s,a;if(e.attr(t.FROM_CURRENT_TASK,!0),n=null!=(i=t.toolOptions)?i.color:void 0,null!=n&&(e.el.style.color=n),e.unit=t.toolOptions.unit,e.upp=t.toolOptions.upp,null!=(s=e.controls)&&(s.details=t.toolOptions.details),null!=t.toolOptions){a=t.toolOptions;for(o in a)r=a[o],e[o]=r}return e.mark.set("_taskIndex",t.taskIndex),e.mark.set("frame",t.currentFrame)}}(this)),this.markingSurfaceContainer.append(this.markingSurface.el)},n.prototype.loadSubject=function(t,e){var n,o,r,i,s,a,l,u,p;for(this.subject=t,this.pauseFrames(),this.markingSurface.reset();0!==this.frames.length;)this.frames.pop().remove();for(this.togglesList.empty(),s=[],n=[],i=null!=(p=this.subject.location.standard)?p:this.subject.location,i=[].concat(i),a=function(t){return function(o){return t.addFrame(r,function(r){var a,l;return s.push(r.attr("width")),n.push(r.attr("height")),l=Math.max.apply(Math,s),a=Math.max.apply(Math,n),t.markingSurface.svg.attr({viewBox:"0 0 "+l+" "+a}),t.frameGroup.attr({transform:"translate("+l/2+", "+a/2+")"}),o+1===i.length?(t.goTo(0),"function"==typeof e?e():void 0):void 0}),t.addToggle(o)}}(this),o=l=0,u=i.length;u>l;o=++l)r=i[o],a(o);return this.frameControls.attr("data-single-frame",1===i.length||null)},n.prototype.loadClassification=function(){},n.prototype.addFrame=function(t,e){return i(t,function(t){return function(n){var o,r,i,s;return i=n.src,s=n.width,o=n.height,r=t.frameGroup.addShape("image",{"xlink:href":i,width:s,height:o,x:s/-2,y:o/-2}),t.frames.push(r),"function"==typeof e?e(r):void 0}}(this))},n.prototype.addToggle=function(t){return this.togglesList.append("<button name='toggle-frame' value='"+t+"' class='toggle-frame'>"+(t+1)+"</button>\n")},n.prototype.goTo=function(t){var e;return this.currentFrame=t,this.currentFrame=l(this.currentFrame,this.frames.length),this.frames[this.currentFrame].toFront(),e=this.togglesList.find("button"),e.attr("data-selected",null),e.eq(this.currentFrame).attr("data-selected",!0),this.el.trigger("change-frame",[this.currentFrame])},n.prototype.playFrames=function(){return this.playButton.prop("disabled",!0),this.pauseButton.prop("disabled",!1),this.advanceFrames()},n.prototype.advanceFrames=function(){return this.goTo(this.currentFrame+1),this.advanceTimeout=setTimeout(this.advanceFrames.bind(this),250)},n.prototype.pauseFrames=function(){return clearTimeout(this.advanceTimeout),this.playButton.prop("disabled",!1),this.pauseButton.prop("disabled",!0)},n.prototype.setTaskIndex=function(t){var e,n,o,r;for(this.taskIndex=t,o=this.markingSurface.tools,r=[],n=o.length-1;n>=0;n+=-1)e=o[n],r.push(e.attr(this.FROM_CURRENT_TASK,e.mark._taskIndex===this.taskIndex||null));return r},n.prototype.setTool=function(t,e){return this.markingSurface.tool=t,this.toolOptions=e},n.prototype.getMarks=function(){var t,e,n,o,r,i;for(e={},i=this.markingSurface.tools,n=0,o=i.length;o>n;n++)t=i[n].mark,null==e[r=t.step]&&(e[r]=[]),e[t.step].push(t);return e},n.prototype.events={'click button[name="play-frames"]':function(){return this.playFrames(),this.pauseButton.focus()},'click button[name="pause-frames"]':function(){return this.pauseFrames(),this.playButton.focus()},'click button[name="toggle-frame"]':function(t){return this.goTo(t.currentTarget.value)}},n}(n),e.exports=r},{"./templates/subject-viewer":79,"marking-surface":6,"zooniverse/controllers/base-controller":16}],69:[function(t,e){var n,o,r={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("zooniverse-decision-tree/lib/button-task"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.choiceTemplate=t("../templates/choice"),n}(n),e.exports=o},{"../templates/choice":74,"zooniverse-decision-tree/lib/button-task":12}],70:[function(t,e){var n,o,r={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("zooniverse-decision-tree/lib/checkbox-task"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.choiceTemplate=t("../templates/choice"),n}(n),e.exports=o},{"../templates/choice":74,"zooniverse-decision-tree/lib/checkbox-task":13}],71:[function(t,e){var n,o,r={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=t("./radio"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return i(n,e),n.type="drawing",n.prototype.tools={point:t("../drawing-tools/point"),ellipse:t("marking-surface/lib/tools/ellipse"),rect:t("marking-surface/lib/tools/rectangle"),text:t("marking-surface/lib/tools/transcription")},n.prototype.SELECT_TOOL="decision-tree:select-drawing-tool",n.prototype.enter=function(){return n.__super__.enter.apply(this,arguments),this.el.addEventListener("change",this,!1),1===this.choices.length?(this.reset(this.choices[0].value),this.selectTool(this.choices[0].value,this.choices[0])):void 0},n.prototype.exit=function(){return n.__super__.exit.apply(this,arguments),this.el.removeEventListener("change",this,!1),this.dispatchEvent(this.CHANGE_TOOL,null)},n.prototype.handleEvent=function(t){var e;return"change"===t.type&&t.target.hasAttribute("data-choice-index")?(e=this.getChoice(),this.selectTool(e.value,e)):n.__super__.handleEvent.apply(this,arguments)},n.prototype.selectTool=function(t,e){return"string"==typeof t&&(t=this.tools[t]),this.dispatchEvent(this.SELECT_TOOL,{tool:t,choice:e})},n}(o),e.exports=n},{"../drawing-tools/point":62,"./radio":73,"marking-surface/lib/tools/ellipse":7,"marking-surface/lib/tools/rectangle":9,"marking-surface/lib/tools/transcription":10}],72:[function(t,e){var n,o,r,i,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};r=t("./radio"),n=t("zooniverse/controllers/dropdown"),i=t("../templates/choice"),o=function(t){function e(){e.__super__.constructor.apply(this,arguments),null==this.currentFilters&&(this.currentFilters={}),this.reflectFilter()}return a(e,t),e.type="filter",e.prototype.filters=null,e.prototype.currentFilters=null,e.prototype.buttons=null,e.prototype.menus=null,e.prototype.clearButtons=null,e.prototype.dropdowns=null,e.prototype.filtersTemplate=function(){var t,e,n,o;return"<div class='readymade-classification-filters'> "+function(){var r,i,s,a;for(s=this.filters,a=[],e=r=0,i=s.length;i>r;e=++r)t=s[e],a.push("<div class='readymade-classification-filter'> <button name='"+t.key+"' class='readymade-filter-button'>"+t.label+"</button> <div class='readymade-filter-menu'> <form> "+function(){var e,r,i,s;for(i=t.values,s=[],n=e=0,r=i.length;r>e;n=++e)o=i[n],s.push(this.valueTemplate(t,o,n));return s}.call(this).join("\n")+" "+this.valueTemplate({key:t.key,type:"button"},{label:"&times;",value:""},0)+" </form> </div> </div>");return a}.call(this).join("\n")+" </div>"},e.prototype.valueTemplate=function(t,e,n){return t=Object.create(t),null==t.type&&(t.type="radio"),i.call(t,e,n)},e.prototype.renderTemplate=function(){var t,o,r,i;return e.__super__.renderTemplate.apply(this,arguments),i=this.el.querySelector(".decision-tree-question"),i.insertAdjacentHTML("afterEnd",this.filtersTemplate()),t=this.el.querySelector(".readymade-classification-filters"),this.buttons=Array.prototype.slice.call(t.querySelectorAll(".readymade-filter-button")),this.menus=Array.prototype.slice.call(t.querySelectorAll(".readymade-filter-menu")),this.clearButtons=function(){var t,e,n,o;for(n=this.menus,o=[],t=0,e=n.length;e>t;t++)r=n[t],o.push(r.querySelector('input[type="button"][value=""]'));return o}.call(this),this.dropdowns=function(){var t,e,r;for(r=[],o=t=0,e=this.buttons.length;e>=0?e>t:t>e;o=e>=0?++t:--t)r.push(new n({button:this.buttons[o],menu:this.menus[o],buttonPinning:[1,1],menuPinning:[1,0]}));return r}.call(this)},e.prototype.enter=function(){var t,n,o,r;for(e.__super__.enter.apply(this,arguments),r=[],t=n=0,o=this.menus.length;o>=0?o>n:n>o;t=o>=0?++n:--n)this.menus[t].addEventListener("change",this),r.push(this.clearButtons[t].addEventListener("click",this));return r},e.prototype.exit=function(){var t,n,o;for(t=n=0,o=this.menus.length;o>=0?o>n:n>o;t=o>=0?++n:--n)this.menus[t].removeEventListener("change",this),this.clearButtons[t].removeEventListener("click",this);return e.__super__.exit.apply(this,arguments)},e.prototype.handleEvent=function(t){var o,r;return"change"===t.type&&(o=t.currentTarget,l.call(this.menus,o)>=0)?(this.handleFilterChange(this.menus.indexOf(t.currentTarget)),n.closeAll()):"click"===t.type&&(r=t.currentTarget,l.call(this.clearButtons,r)>=0)?this.clearFilter(this.clearButtons.indexOf(t.currentTarget)):e.__super__.handleEvent.apply(this,arguments)},e.prototype.handleFilterChange=function(t){var e,n;return e=this.menus[t].querySelector(":checked"),e&&(n=e.getAttribute("data-choice-index"),this.currentFilters[this.filters[t].key]=this.filters[t].values[n].value),this.reflectFilter(this.currentFilters)},e.prototype.clearFilter=function(t){var e;return null!=(e=this.menus[t].querySelector(":checked"))&&(e.checked=!1),delete this.currentFilters[this.filters[t].key],this.reflectFilter(this.currentFilters)},e.prototype.reflectFilter=function(t){var e,n,o,r,i,s,a,u;for(n=this.el.querySelectorAll("[data-choice-index]"),u=[],o=s=0,a=n.length;a>s;o=++s)e=n[o],e.removeAttribute("data-filtered"),u.push(function(){var n;n=[];for(r in t)i=t[r],n.push(l.call(this.choices[o].traits[r],i)<0?e.setAttribute("data-filtered",!0):void 0);return n}.call(this));return u},e}(r),e.exports=o},{"../templates/choice":74,"./radio":73,"zooniverse/controllers/dropdown":18}],73:[function(t,e){var n,o,r={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("zooniverse-decision-tree/lib/radio-task"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.choiceTemplate=t("../templates/choice"),n}(n),e.exports=o},{"../templates/choice":74,"zooniverse-decision-tree/lib/radio-task":15}],74:[function(t,e){var n;n={drawing:"radio",filter:"radio"},e.exports=function(t,e){var o,r,i,s,a,l,u,p;return"<label class='readymade-choice-input-wrapper'> <input type='"+(null!=(o=null!=(r=null!=(i=n[null!=(s=this.constructor)?s.type:void 0])?i:n[this.type])?r:null!=(a=this.constructor)?a.type:void 0)?o:this.type)+"' name='"+this.key+"' value='"+t.value+"' data-choice-index='"+e+"' /> <div class='readymade-choice-clickable readymade-choice-"+(null!=(l=this.constructor.type)?l:this.type)+"'> <div class='readymade-choice-tickbox'> <div class='readymade-choice-tick'></div> </div> "+(null!=t.image?"<div class='readymade-choice-image'><img src='"+t.image+"' /></div>":"")+" <div class='readymade-choice-label'>"+(null!=(u=null!=(p=t.label)?p:t.value)?u:e)+"</div> "+(null!=t.color?"<div class='readymade-choice-color' style='color: "+t.color+";'></div>":"")+" </div> </label>"}},{}],75:[function(t,e){e.exports=function(t){t||(t={});var e,n=[],o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="readymade-classification-interface">\n  <div class="readymade-subject-viewer-container"></div>\n  <div class="readymade-decision-tree-container"></div>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,n.join("")}},{}],76:[function(t,e){e.exports=function(e){e||(e={});var n,o=[],r=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},i=e.safe,s=e.escape;return n=e.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=e.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,i,s,a,l;for(e=t("../lib/dash"),o.push('\n\n<div class="readymade-home-page">\n  '),this.summary&&(o.push('\n    <div class="readymade-project-summary">\n      '),o.push(this.summary),o.push("\n    </div>\n  ")),o.push("\n\n  "),this.description&&(o.push('\n    <div class="readymade-project-description">\n      '),o.push(this.description),o.push("\n    </div>\n  ")),o.push('\n\n  <div class="readymade-footer">\n    '),i=null!=(l=this.workflows)?l:[{label:"Classify"}],o.push("\n    "),s=0,a=i.length;a>s;s++)n=i[s].label,o.push('\n      <a href="#/'),o.push(r(e(n))),o.push('" class="readymade-call-to-action">'),o.push(n),o.push("</a>\n    ");o.push("\n  </div>\n</div>\n")}).call(this)}.call(e),e.safe=i,e.escape=s,o.join("")}},{"../lib/dash":64}],77:[function(t,e){e.exports=function(t){t||(t={});var e,n=[],o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="readymade-site-background-effect"></div>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,n.join("")}},{}],78:[function(t,e){e.exports=function(t){t||(t={});var e,n=[],o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")
}),function(){(function(){n.push('<div class="readymade-creator">\n  <a href="#/">\n    <div class="readymade-project-producer">'),n.push(this.producer),n.push('</div>\n    <div class="readymade-project-title">'),n.push(this.title),n.push('</div>\n  </a>\n</div>\n\n<div class="readymade-site-links"></div>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,n.join("")}},{}],79:[function(t,e){e.exports=function(t){t||(t={});var e,n=[],o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="readymade-marking-surface-container"></div>\n\n<div class="readymade-frame-controls">\n  <div class="readymade-frame-play-controls">\n    <button name="play-frames"></button>\n    <button name="pause-frames"></button>\n  </div>\n\n  <div class="readymade-frame-toggles-list"></div>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,n.join("")}},{}],80:[function(t,e){e.exports=function(t){t||(t={});var e,n=[],o=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?i(t):""},r=t.safe,i=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,r,i,s,a,l,u,p,c,h,d,f,g,v;for(n.push('<div class="readymade-team-page">\n  '),g=["organizations","scientists","developers"],l=0,h=g.length;h>l;l++)if(t=g[l],null!=this[t]){for(n.push('\n    <div class="readymade-team-group-title">\n      '),"organizations"===t?n.push("\n        Organizations\n      "):"scientists"===t?n.push("\n        Scientists\n      "):"developers"===t&&n.push("\n        Developers\n      "),n.push('\n    </div>\n    <div class="readymade-'),n.push(o(t)),n.push(' readymade-team-group">\n      '),v=this[t],r=u=0,d=v.length;d>u;r=++u){if(i=v[r],n.push('\n        <div class="readymade-team-member">\n          '),null!=i.image&&(n.push('\n            <img src="'),n.push(o(i.image)),n.push('" class="readymade-team-member-photo" />\n          ')),n.push('\n\n          <div class="readymade-team-member-title">\n            '),null!=i.name&&(n.push("\n              "),n.push(i.name),n.push("\n            ")),n.push("\n\n            "),null!=i.url){for(n.push('\n              <span class="readymade-member-links">\n                '),a=[].concat(i.url),n.push("\n                "),p=0,f=a.length;f>p;p++)s=a[p],n.push('\n                  <a href="'),n.push(o(s)),n.push('" class="readymade-member-url">\n                    <!--TODO: These will be icons.-->\n                    '),n.push(s.match("facebook.com")?'\n                      <i class="fa fa-lg fa-facebook-square"></i>\n                    ':s.match("github.com")?'\n                      <i class="fa fa-lg fa-github-alt"></i>\n                    ':s.match("linkedin.com")?'\n                      <i class="fa fa-lg fa-linkedin-square"></i>\n                    ':s.match("twitter.com")?'\n                      <i class="fa fa-lg fa-twitter"></i>\n                    ':s.match("mailto:")?'\n                      <i class="fa fa-lg fa-envelope"></i>\n                    ':'\n                      <i class="fa fa-lg fa-globe"></i>\n                    '),n.push("\n                  </a>\n                ");n.push("\n              </span>\n            ")}for(n.push('\n          </div>\n\n          <div class="readymade-team-member-description">\n            '),null!=i.description&&(n.push("\n              "),n.push(i.description),n.push("\n            ")),n.push("\n          </div>\n        </div>\n\n        <!--"),e=c=2;5>c;e=++c)n.push("\n          "),(r+1)%e===0&&(n.push('\n            <span class="readymade-set-of-'),n.push(o(e)),n.push('"></span>\n          ')),n.push("\n        ");n.push("-->\n      ")}n.push("\n    </div>\n  ")}n.push("\n</div>\n")}).call(this)}.call(t),t.safe=r,t.escape=i,n.join("")}},{}],81:[function(t,e){e.exports=function(t){t||(t={});var e,n=[],o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push("<button name='readymade-destroy-drawing'>&times;</button>\n<form></form>\n")}).call(this)}.call(t),t.safe=o,t.escape=r,n.join("")}},{}]},{},[3]);